<h1><b>–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é –í–∞—Å –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏/–≥–∞–π–¥—É –∫ –º–æ–µ–º—É —Ç–µ–ª–µ–≥—Ä–∞–º–º-–±–æ—Ç—É –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤.</b></h1>
<h3><b>–î–∏—Å–∫–ª–µ–π–º–µ—Ä</b></h3>
<p><i>–°—Ä–∞–∑—É —Ö–æ—á—É —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ –≥–∞–π–¥ –Ω–∞—Ü–µ–ª–µ–Ω –Ω–∞ –ª—é–¥–µ–π, –∏–º–µ—é—â–∏—Ö —Ö–æ—Ç—è –±—ã –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ python, —Ç–∞–∫ –∫–∞–∫ —è –Ω–µ –æ—á–µ–Ω—å —Ö–æ—á—É –¥–æ—Å–∫–æ–Ω–∞–ª—å–Ω–æ —Ä–∞–∑–∂—ë–≤—ã–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –ü–ª—é—Å–æ–º, —è –Ω–µ —è–≤–ª—è—é—Å—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–º, –∞ —Å–∫–æ—Ä–µ–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º-—Å–∞–º–æ—É—á–∫–æ–π, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ—Å—Ç–æ —Ö–æ—á–µ—Ç —Å–¥–µ–ª–∞—Ç—å —Ç–æ, —á—Ç–æ —Ö–æ—á–µ—Ç. –í –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å, —Ö–æ—á—É –ø–æ—Å–æ–≤–µ—Ç–æ–≤–∞—Ç—å –≤—Å—ë –∂–µ —á–∏—Ç–∞—Ç—å –≥–∞–π–¥—ã –±–æ–ª–µ–µ –∑–Ω–∞—é—â–∏—Ö –ª—é–¥–µ–π (—Å–ø–∏—Å–æ–∫ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã –±—É–¥–µ—Ç –Ω–∏–∂–µ). –ú–æ–π –∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—É—é –Ω–∞—Ö–æ–¥–∫—É –∏–ª–∏ —Ç–∏–ø–æ —Ç–æ–≥–æ.</i></p>
<p><i>–¢–∞–∫ –∫–∞–∫ —è –Ω–µ –¥–µ–ª–∞—é –≥–∞–π–¥ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –ø–æ—è—Å–Ω–µ–Ω–∏–µ–º –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, —è –±—ã –ø–æ—Å–æ–≤–µ—Ç–æ–≤–∞–ª –ø—Ä–∏–±–µ–≥–Ω—É—Ç—å –∫ —Ç–∞–∫–æ–º—É –ø–æ—Ä—è–¥–∫—É: –ø—Ä–æ–±–µ–≥–∞–µ—Ç–µ –≥–ª–∞–∑–∞–º–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —á–∞—Å—Ç–∏ –≥–∞–π–¥–∞ (–ø—Ä–æ—â–µ –±—Ä–∞—Ç—å —Ñ–∞–π–ª–∞–º–∏) -> —á—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–º - –≥—É–≥–ª–∏—Ç–µ –∏–ª–∏ —á–∏—Ç–∞–µ—Ç–µ –≤—Ç–æ—Ä–æ–π –≥–∞–π–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –º–Ω–æ–π) -> –ø—ã—Ç–∞–µ—Ç–µ—Å—å –ø–æ–Ω—è—Ç—å –º–æ–π –≥–∞–π–¥.</i></p>
<p><i>–ü—Ä–æ–µ–∫—Ç, –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è, –≤—Å–µ –µ—â—ë –Ω–∞—Ö–æ–¥–∏—Ç—Å—è <b>–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</b>. –ü–æ—ç—Ç–æ–º—É readme –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∏ –±—É–¥–µ—Ç –ø–æ–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏. –ü–æ—ç—Ç–æ–º—É –Ω–µ —Å—Ç–æ–∏—Ç "—Ç—ã–∫–∞—Ç—å" –º–µ–Ω—è –≤ —Ç–æ, —á—Ç–æ –∫–∞–∫–∞—è-—Ç–æ —á–∞—Å—Ç—å –Ω–µ –¥–æ–ø–∏—Å–∞–Ω–∞ –∏/–∏–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–±—ä—è—Å–Ω–µ–Ω–∞.</i></p>
<p><i>–ú–Ω–µ –∫–∞–∂–µ—Ç—Å—è, –∑–¥–µ—Å—å –≥–ª–∞–≤–Ω–æ–µ –ø–æ–Ω—è—Ç—å –º–æ—é —Ñ–∏–ª–æ—Å–æ—Ñ–∏—é –∏ –≤–∑—è—Ç—å –≥–æ—Ç–æ–≤—ã–µ –æ—Ç –º–µ–Ω—è —Ä–µ—à–µ–Ω–∏—è, –∞ –Ω–µ —É—á–∏—Ç—å—Å—è –ø–æ –º–Ω–µ, –∫–∞–∫ –ø–æ —É—á–µ–±–Ω–∏–∫—É. –ò–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –º–æ—è –ª–∏—Ü–µ–Ω–∑–∏—è –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–æ –Ω–µ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—é.</i></p>
<p><i>–ö —ç—Ç–∞–ø—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —è –∏–º–µ–ª –Ω–µ–±–æ–ª—å—à–æ–π –æ–ø—ã—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ JavaScript –∏ HTML/CSS, –±–∞–∑–æ–≤–æ–µ –≤–ª–∞–¥–µ–Ω–∏–µ Linux, Git –∏ –ø—Ä–æ—á–µ–µ</i></p>
<p><b><i>–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ!</i></b></p>
<h2><b>–ü—Ä–µ–¥–∏—Å–ª–æ–≤–∏–µ</b></h2>
<p>–î–∞–Ω–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –±—ã–ª–æ —Ä–µ—à–µ–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω–æ–º—É —Ä–µ–º–µ—Å–ª—É (—è —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤—É—é—Å—å –ø—Ä–æ—Å—Ç–æ–π –ª–æ–≥–∏–∫–æ–π - "–û–±—É—á–∞—Ç—å - –∑–Ω–∞—á–∏—Ç –≤–¥–≤–æ–π–Ω–µ —É—á–∏—Ç—å—Å—è").</p>
<p>–≠—Ç–∞ –∏–¥–µ—è –≤–æ–∑–Ω–∏–∫–ª–∞ —É –º–µ–Ω—è –ø—Ä–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –≤ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç, —è —É–≤–∏–¥–µ–ª –∑–∞–ø—Ä–æ—Å –ª—é–¥–µ–π –Ω–∞ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ –≤–Ω—É—Ç—Ä–∏ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞. –ù–æ, –∫–∞–∫ –º—ã –∑–Ω–∞–µ–º, –ø–æ–∫–æ–ª–µ–Ω–∏–µ "–∑—É–º–µ—Ä–æ–≤" (–Ω–µ –ª—é–±–ª—é —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –Ω–∞ –ø–æ–∫–æ–ª–µ–Ω–∏—è, –Ω–æ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –ø–æ–Ω–∏–º–∞–Ω–∏—è –≤ —Å–∞–º—ã–π —Ä–∞–∑) –æ—á–µ–Ω—å –Ω–µ–¥–æ–ª—é–±–ª–∏–≤–∞–µ—Ç dating-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–æ–± —ç—Ç–æ–º —Ç—Ä—É–±—è—Ç –¥–∞–∂–µ –∫—Ä—É–ø–Ω—ã–µ "–∏–≥—Ä–æ–∫–∏ —Ä—ã–Ω–∫–∞", –∫ –ø—Ä–∏–º–µ—Ä—É Tinder), –∏ –µ—Å—Ç—å –∑–∞ —á—Ç–æ. –û—Å–Ω–æ–≤–Ω–∞—è –∏—Ö –º–∞—Å—Å–∞ –∑–∞—Ç–æ—á–µ–Ω–∞ –Ω–∞ –∫–æ–º–º–µ—Ä—Ü–∏—é –∏ —É–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —á—Ç–æ, –∫–∞–∫ –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è, –Ω–µ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ —Å–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–æ–∏—Å–∫–∞ –ø–∞—Ä—Ç–Ω—ë—Ä–∞. –í—ã –º–æ–∂–µ—Ç–µ –≤–æ–∑—Ä–∞–∑–∏—Ç—å –∏ –≤—Å–ø–æ–º–Ω–∏—Ç—å –ø—Ä–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ, –ø–æ—á—Ç–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã —Ä–µ—à–µ–Ω–∏—è, —Ç–∞–∫–∏–µ –∫–∞–∫ "–õ–µ–æ–Ω–∞—Ä–¥–æ –î–∞–π –í–∏–Ω—á–∏–∫", –Ω–æ –∏—Ö –ø—Ä–æ–±–ª–µ–º–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –æ—á–µ–Ω—å –Ω–µ–±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω–æ–π —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏, –Ω–∞ —á—Ç–æ –∏ –∂–∞–ª—É—é—Ç—Å—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.</p>
<p>–ò–∑ —ç—Ç–æ–≥–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è —è –∏–∑–≤–ª—ë–∫ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –∏ –Ω–µ–∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö (–µ—Å–ª–∏ –∏—Ö —Ç–∞–∫ –º–æ–∂–Ω–æ –Ω–∞–∑–≤–∞—Ç—å) —Ä–µ—à–µ–Ω–∏–π.</p>

**–ò–∑ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö:**
- –ö–∞–∫–æ–π –Ω–∏–∫–∞–∫–æ–π, –Ω–æ –ø–æ—Ä–æ–≥ –≤—Ö–æ–¥–∞
- –î–æ–≤–æ–ª—å–Ω–æ –∞–∫—Ç–∏–≤–Ω–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è

**–ò–∑ "–Ω–µ–∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö":**
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

<p>–°–ª–µ–¥—É—é—â–∏–º —ç—Ç–∞–ø–æ–º —Å—Ç–∞–ª–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ "–Ω–∞ –±—É–º–∞–≥–µ", –ø—Ä–æ–¥—É–º—ã–≤–∞–Ω–∏–µ –∏ –ø—Ä–∏–¥—É–º—ã–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö "–º–µ—Ö–∞–Ω–∏–∫" –º–æ–µ–≥–æ –±–æ—Ç–∞. –Ø –≤—ã–¥–µ–ª–∏–ª –æ—Å–Ω–æ–≤–Ω–æ–π –≤–µ–∫—Ç–æ—Ä —Ä–∞–∑–≤–∏—Ç–∏—è.</p>

**–ë–æ—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å:**
1. –õ–æ–∫–∞–ª—å–Ω–æ—Å—Ç—å –∏–ª–∏ —ç–ª–∏—Ç–∞—Ä–Ω–æ—Å—Ç—å (–µ—Å–ª–∏ —É–º–µ—Å—Ç–Ω–æ —Ç–∞–∫ –≥–æ–≤–æ—Ä–∏—Ç—å). –õ—é–¥—è–º –Ω—Ä–∞–≤–∏—Ç—Å—è –ø—Ä–∏—á–∏—Å–ª—è—Ç—å —Å–µ–±—è –∫ –∫–∞–∫–æ–π-—Ç–æ "–æ—Å–æ–±–æ–π –∫–∞—Å—Ç–µ", –∏ –∑–∞–∫—Ä—ã—Ç–æ—Å—Ç—å –∫–∞–∫–æ–π-–ª–∏–±–æ "—Ç—É—Å–æ–≤–∫–∏" —Ç–æ–ª—å–∫–æ –¥–æ–ø–æ–ª–Ω—è–µ—Ç –∂–µ–ª–∞–Ω–∏–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å, –ø–æ—Ç—Ä–æ–≥–∞—Ç—å –¥–∞–Ω–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç. –ü–ª—é—Å–æ–º, —ç—Ç–æ —Å—Ç–∞–Ω–µ—Ç —Ö–æ—Ä–æ—à–∏–º –ø–æ–¥—Å–ø–æ—Ä—å–µ–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–≤–æ–ª—å–Ω–æ –≤—ã—Å–æ–∫–æ–≥–æ –ø–æ—Ä–æ–≥–∞ –≤—Ö–æ–¥–∞ (–æ —á–µ–º —è –≥–æ–≤–æ—Ä–∏–ª –≤ –ø–ª—é—Å–∞—Ö –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π) –∏ –ø—Ä–æ—Å—Ç–æ—Ç—ã –º–æ–¥–µ—Ä–∞—Ü–∏–∏ (–Ω–æ –æ–± —ç—Ç–æ–º –ø–æ–¥—Ä–æ–±–Ω–µ–µ —á—É—Ç—å –ø–æ–∑–∂–µ).
2. –¢–æ—Ç —Å–∞–º—ã–π –ø–æ—Ä–æ–≥ –≤—Ö–æ–¥–∞. –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –ª—é–¥—å–º–∏ –æ–¥–Ω–æ–≥–æ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞, —á—Ç–æ —É–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ "–∑–Ω–∞–∫–æ–º—Å—Ç–≤", –∏ –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –µ–≥–æ (–±–æ—Ç) –±—ã—Ç—å –±–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º—ã–º –∫–∞–∫ –ø–æ–ª–µ–∑–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç –≤ —Ä–∞–º–∫–∞—Ö —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞, –Ω–µ–∂–µ–ª–∏ –∫–∞–∫ –º–æ–π –ª–∏—á–Ω—ã–π pet-–ø—Ä–æ–µ–∫—Ç.
3. –ê–¥–µ–∫–≤–∞—Ç–Ω—É—é –º–æ–¥–µ—Ä–∞—Ü–∏—é. –î–æ–≤–æ–ª—å–Ω–æ —Å–µ—Ä—å—ë–∑–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –∑–∞ –Ω–µ—Å–æ–±–ª—é–¥–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª (–∫–æ—Ç–æ—Ä—ã—Ö –∏ —Ç–∞–∫ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è —Ñ–æ—Ä–º–∞–ª—å–Ω–æ–µ –∫–æ–ª-–≤–æ) –∏ –¥–≤–∞ –ø—É–Ω–∫—Ç–∞ –≤—ã—à–µ —Å–ø–æ–¥–≤–∏–≥–∞—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±—ã—Ç—å –±–æ–ª–µ–µ "–ø–æ—Å–ª—É—à–Ω—ã–º–∏".
4. –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å. –¢–∞–∫ –∫–∞–∫ –±–æ—Ç –Ω–µ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç –æ–≥—Ä–æ–º–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Ç–æ –æ–Ω —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–º –≤ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–∏.
5. –ü—Ä–æ—Å—Ç–æ—Ç–∞. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç –î–∞–π–í–∏–Ω—á–∏–∫–∞ - –≥–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–º–µ—é—â–µ–π—Å—è –∞–Ω–∫–µ—Ç—ã –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.  
<p>–í —Ü–µ–ª–æ–º, –≤—Å–µ –ø—É–Ω–∫—Ç—ã –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∞–Ω—ã. –ü–æ—ç—Ç–æ–º—É —è —Ä–µ—à–∞—é –≤–≤–µ—Å—Ç–∏ <b>–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é</b> –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–∞–∫ —Å—Ç—É–¥–µ–Ω—Ç–∞, —á—Ç–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Å–æ–±–æ–π —Å—Ä–∞–∑—É –≤—Å–µ –ø—É–Ω–∫—Ç—ã –≤ —Ç–æ–π –∏–ª–∏ –∏–Ω–æ–π —Å—Ç–µ–ø–µ–Ω–∏. –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç –Ω–µ–∫–∏–π "–∑–∞–∫—Ä—ã—Ç—ã–π –∫–ª—É–±", –∑–∞–¥–∞–µ—Ç –≤—ã—Å–æ–∫–∏–π –ø–æ—Ä–æ–≥ –≤—Ö–æ–¥–∞, –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º–∞—Ç–∏—á–Ω—ã–º –æ–±—Ö–æ–¥—ã "—Å–∞–Ω–∫—Ü–∏–π", –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–æ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã (—Ç–æ–µ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–æ—Å—Ç–æ—Ç—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è), –∏, –∫–∞–∫ —Å–ª–µ–¥—Å—Ç–≤–∏–µ, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –æ–≥—Ä–æ–º–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç –Ω–∞ "–∂–∏–∑–Ω–µ–æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ" –∏–∑-–∑–∞ –º–∞–ª–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.</p>

<h2><b>–ù–∞—á–∞–ª–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: aiogram</b></h2>
<p>–ù–∞—á–∞–ª —è —Å–≤–æ–π –ø—É—Ç—å —Å –ø–æ–∏—Å–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫, —Ç–∞–∫ –∫–∞–∫ —è –Ω–µ —á—É—Ä–∞–ª—Å—è Python –∏ –∑–Ω–∞–ª, —á—Ç–æ –æ–Ω –±–æ–ª–µ–µ –≤—ã–∏–≥—Ä—ã—à–Ω—ã–π –¥–ª—è —Ç–∞–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤, –ø–æ—ç—Ç–æ–º—É –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è –Ω–∞ –Ω—ë–º. –ü–ª—é—Å–æ–º, –ø–æ –º–æ–µ–º—É –ª–∏—á–Ω–æ–º—É –º–Ω–µ–Ω–∏—é, Python –∏ JavaScript –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ö–æ–∂–∏, —á—Ç–æ–±—ã –±—ã—Å—Ç—Ä–æ "–ø–µ—Ä–µ–ø—Ä—ã–≥–Ω—É—Ç—å" —Å –æ–¥–Ω–æ–≥–æ —è–∑—ã–∫–∞ –Ω–∞ –¥—Ä—É–≥–æ–π. –ï—Å–ª–∏ –æ–±–æ–±—â–∞—Ç—å, —Ç–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–æ–≤ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –ª–∏—à—å –¥–≤–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏: python-telegram-bot –∏ aiogram</p>
<p>–ü–æ –º–æ–µ–º—É —Å–∫—Ä–æ–º–Ω–æ–º—É –∏ –Ω–µ —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–º—É –º–Ω–µ–Ω–∏—é, python-telegram-bot –º–Ω–µ –ø–æ–∫–∞–∑–∞–ª–∞—Å—å –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–µ–π –¥–ª—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤, –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –¥—Ä—É–≥–∏—Ö —Ç–æ–Ω–∫–æ—Å—Ç–µ–π –Ω–∞—Ç–æ–ª–∫–Ω—É–ª–∏ –º–µ–Ω—è –Ω–∞ –≤—ã–±–æ—Ä –≤ –ø–æ–ª—å–∑—É aiogram.</p>
<p>–î–ª—è –Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –±—ã–ª–æ —Å–æ–∑–¥–∞—Ç—å "—à–∞–±–ª–æ–Ω" –±–æ—Ç–∞, —á—Ç–æ–±—ã –æ–Ω –ø—Ä–æ—Å—Ç–æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª. –≠—Ç–æ, –∫–∞–∫ –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è, –æ—á–µ–Ω—å –¥–æ—Ö–æ–¥—á–∏–≤–æ –æ–±—ä—è—Å–Ω—è–µ—Ç <i>mastergroosha</i> –≤ –≥–ª–∞–≤–µ "–ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å aiogram" (–ø–µ—Ä–≤–∞—è —Å—Å—ã–ª–∫–∞ –≤ "C–ø–∏—Å–æ–∫ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã"). –°–æ–≤–µ—Ç—É—é –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è –∏ —Å–¥–µ–ª–∞—Ç—å –≤—Å—ë —Ç–æ, –æ —á–µ–º –≥–æ–≤–æ—Ä–∏—Ç—Å—è –≤ —ç—Ç–æ–π –≥–ª–∞–≤–µ (–æ—Å–æ–±–µ–Ω–Ω–æ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏).</p>
<p>–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ BotFather —Å—Ç–∞–ª –¥–ª—è –Ω–∞—Å –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–ª–æ–≤–æ–º, –º—ã –ø—Ä–∏—Å—Ç—É–ø–∞–µ–º –∫ –Ω–∞–ø–∏—Å–∞–Ω–∏—é handler (–ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ , –ø—Ä–æ–≥—Ä–∞–º–º—É –¥–ª—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —á–∞—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞). –í –º–æ—ë–º —Å–ª—É—á–∞–µ, –ø–µ—Ä–≤—ã–º –Ω–∞ –æ—á–µ—Ä–µ–¥–∏ —Å—Ç–∞–ª <i>create.py</i> - handler –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–Ω–∫–µ—Ç—ã.</p>

```python
from aiogram import Router, F # router –Ω—É–∂–µ–Ω –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –ø–æ —Ñ–∞–π–ª–∞–º; F - –º–∞–≥–∏—á–µ—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä
from aiogram.fsm.context import FSMContext # FSMContext - —Å–≤—è–∑—ã–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –¥–∞–Ω–Ω—ã–µ, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ –æ–±–Ω—É–ª—è–ª–∏—Å—å –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –º–µ–∂–¥—É states (–¥—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, —á—Ç–æ-—Ç–æ –Ω–∞–ø–æ–¥–æ–±–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞)
from keyboards.simple_row import make_row_keyboard # —Å–æ–∑–¥–∞–Ω–Ω–∞—è –º–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –∫–Ω–æ–ø–æ–∫
from aiogram.types import Message, ReplyKeyboardRemove, ContentType, InlineKeyboardButton, InlineKeyboardMarkup # –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
from dictionary import texts, icons # –º–æ–π —Å–ª–æ–≤–∞—Ä—å –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –∏ —Ç.–ø.
from database import save_user_data, get_user_data, upload_media # —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
from handlers.states import info # states, –∫–æ—Ç–æ—Ä—ã–µ —è —Ö—Ä–∞–Ω—é –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏

router = Router() # –æ–±–æ–∑–Ω–∞—á–∞–µ–º router, –∫–∞–∫ router (–ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ –Ω—É–∂–Ω–æ)

@router.message(info.create) # router.message - —Å–æ–∑–¥–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Ö–æ–¥—è—â–∏–π —Å–æ–æ–±—â–µ–Ω–∏–π; info.create - —ç—Ç–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π state (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è state, –∞ –Ω–µ info), –∫–æ—Ç–æ—Ä—ã–π —Å–ª—É–∂–∏—Ç –Ω–µ–∫–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –ø–æ "—Å–æ—Å—Ç–æ—è–Ω–∏—è–º" –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
async def cmd_form(message: Message, state: FSMContext): # –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è state –º–æ–∂–µ—Ç –∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—å FSMContext, –Ω–æ –≤ —Å–ª—É—á–∞–µ –¥–∞–Ω–Ω–æ–≥–æ handler —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–∑-–∑–∞ –∫–æ–ª-–≤–∞ states
    await message.answer( # –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è message.answer - —Ä–µ–∞–∫—Ü–∏—è –±–æ—Ç–∞ –Ω–∞ –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ–æ–±—â–µ–Ω–∏–µ
        text=""I waited a long time..."", # –ø–∏—à–µ–º –ª—é–±–æ–π —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏/–Ω–∞–ø–∏—Å–∞–Ω–∏–∏ /start
        reply_markup=make_row_keyboard(icons['languages']) # –∑–¥–µ—Å—å —è –∏—Å–ø–æ–ª—å–∑—É—é —Å–æ–∑–¥–∞–Ω–Ω—É—é –º–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∏ –≤–≤–µ–¥–µ–Ω–∏–µ–º –≤ –Ω–µ—ë –∞—Ä–≥—É–º–µ–Ω—Ç—ã icons['languages'] - –≤ –º–æ—ë–º —Å–ª—É—á–∞–µ, –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏–∑ —Å–ª–æ–≤–∞—Ä—è –¥–ª—è –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞
    )
    await state.set_state(info.language) # –¥–µ–ª–∞–µ–º –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π state - "—Å—Ü–µ–Ω–∞—Ä–∏–π"

@router.message(info.language) # –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –Ω–æ–≤—ã–π state
async def language_chosen(message: Message, state: FSMContext):
    match message.text:
        case "üá∑üá∫": 
            keyboard = InlineKeyboardMarkup(inline_keyboard=[
            [InlineKeyboardButton(url='t.me/wayoki', text='–ú–æ–π —Å–æ–∑–¥–∞—Ç–µ–ª—å')]
            ]) # –æ—Å—Ç–∞–≤–ª—è—é —Å—Å—ã–ª–∫—É –Ω–∞ —Å–µ–±—è –≤ –≤–∏–¥–µ inline button (–∫–Ω–æ–ø–∫–∞ –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º, –∞ –Ω–µ –≤ –ø–æ–ª–µ —Å—Ç—Ä–æ–∫–∏ –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞)
            await state.update_data(language = '–†—É—Å—Å–∫–∏–π') # –º–µ—Ç–æ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –≥–¥–µ language —è–≤–ª—è–µ—Ç—Å—è –∫–ª—é—á–æ–º, –∞ '–†—É—Å—Å–∫–∏–π' –∑–Ω–∞—á–µ–Ω–∏–µ–º
            await message.answer(texts['–†—É—Å—Å–∫–∏–π']['intro'], reply_markup=keyboard)
            await message.answer(texts['–†—É—Å—Å–∫–∏–π']['intro2'], reply_markup=ReplyKeyboardRemove()) # –º–µ—Ç–æ–¥, —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏
            await message.answer(
            text=texts['–†—É—Å—Å–∫–∏–π']['ask_name'],
            reply_markup=ReplyKeyboardRemove()
            ) 
        case "üá¨üáß": # —Ç–æ –∂–µ —Å–∞–º–æ–µ, —á—Ç–æ –∏ –≤—ã—à–µ, —Ç–æ–ª—å–∫–æ —Å –¥—Ä—É–≥–∏–º —è–∑—ã–∫–æ–º
            keyboard = InlineKeyboardMarkup(inline_keyboard=[
            [InlineKeyboardButton(url='t.me/wayoki', text='My creator')]
            ]) 
            await state.update_data(language = 'English')
            await message.answer(texts['English']['intro'], reply_markup=keyboard)
            await message.answer(texts['English']['intro2'], reply_markup=ReplyKeyboardRemove())
            await message.answer(
            text=texts['English']['ask_name'],
            reply_markup=ReplyKeyboardRemove()
            )
        case _: # –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ç–æ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–º–µ—Å—Ç–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫ –Ω–∞–ø–∏—à–µ—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–∫—Å—Ç 
            await message.answer(
            text=texts['English']['wrong_language'],
            reply_markup=make_row_keyboard(icons['languages'])
            ) # –≤—ã–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ—à–∏–±–∫—É –∏ —Å–Ω–æ–≤–∞ –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –≤—ã–±—Ä–∞—Ç—å –µ–º—É —è–∑—ã–∫
    await state.set_state(info.name) # –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π state

@router.message(info.name)
async def language_chosen(message: Message, state: FSMContext):
    user_data = await state.get_data() # –≤–≤–æ–¥–∏–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é user_data –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–º–µ—é—â–∏—Ö—Å—è –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å —è–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
    await state.update_data(user_id = message.from_user.id) # —Å –ø–æ–º–æ—â—å—é message.from_user.id –º—ã –ø–æ–ª—É—á–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π user_id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –µ–≥–æ
    if len(message.text) <= 32: # –æ–±—ã—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥–ª–∏–Ω—É –∏–º–µ–Ω–∏
        await state.update_data(name = message.text)
        await message.answer(
            text=message.text + (texts[user_data['language']]['ask_age']),
            reply_markup=ReplyKeyboardRemove()
        )
        await message.answer(texts[user_data['language']]['about_age'])
        await state.set_state(info.age)
    else:
        await message.answer(
            text=texts[user_data['language']]['wrong_name'],
            reply_markup=ReplyKeyboardRemove()
        )

@router.message(info.age)
async def age_chosen(message: Message, state: FSMContext):
    user_data = await state.get_data()
    if message.text.isdigit() and 16 <= int(message.text) <= 60: # –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤–æ–∑—Ä–∞—Å—Ç –∏ –Ω–∞ —Ç–æ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Ü–∏—Ñ—Ä—ã, –∞ –Ω–µ –±—É–∫–≤—ã
        await state.update_data(age = int(message.text))
        await message.answer(
            text=texts[user_data['language']]['ask_gender'],
            reply_markup=make_row_keyboard(icons['genders'])
        )
        await state.set_state(info.gender)
    elif not message.text.isdigit():
        await message.answer(
            texts[user_data['language']]['wrong_age'],
            reply_markup=ReplyKeyboardRemove()
        )
    else:
        await message.answer(
            texts[user_data['language']]['wrong_age2'],
            reply_markup=ReplyKeyboardRemove()
        )

@router.message(info.gender)
async def gender_chosen(message: Message, state: FSMContext):
    user_data = await state.get_data()
    if message.text in icons['genders']: # –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ç–æ, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª –≤–∞—Ä–∏–∞–Ω—Ç –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö (–≤ –ø—Ä–æ—à–ª–æ–º state –º—ã –ø–µ—Ä–µ–¥–∞–ª–∏ –µ–º—É –∫–Ω–æ–ø–∫–∏)
        await state.update_data(gender = message.text)
        await message.answer(
            text=texts[user_data['language']]['ask_gender_wanna_find'],
            reply_markup=make_row_keyboard(icons['genders_wf'])
        )
        await state.set_state(info.gender_wanna_find)
    else:
        await message.answer(
            text=texts[user_data['language']]['wrong_gender'],
            reply_markup=make_row_keyboard(icons['genders'])
        )

@router.message(info.gender_wanna_find)
async def gender_wanna_find_chosen(message: Message, state: FSMContext):
    user_data = await state.get_data()
    if message.text in icons['genders_wf']:
        await state.update_data(gender_wf = message.text)
        await message.answer(
            text=texts[user_data['language']]['ask_introduction'],
            reply_markup=ReplyKeyboardRemove()
        )
        await message.answer(texts[user_data['language']]['about_introduction'], reply_markup=ReplyKeyboardRemove())
        await state.set_state(info.introduction)
    else:
        await message.answer(
            text=texts[user_data['language']]['wrong_gender'],
            reply_markup=make_row_keyboard(icons['genders_wf'])
        )

@router.message(info.introduction)
async def introduction_chosen(message: Message, state: FSMContext):
    user_data = await state.get_data()
    if len(message.text) <= 2500:
        await state.update_data(introduction = message.text)
        user_data['introduction'] = message.text
        await save_user_data(user_data) # —Å–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
        await get_user_data(user_data.get('user_id')) # –ø–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–º—É –Ω–æ–º–µ—Ä—É (user_id)
        await message.answer(texts[user_data['language']]['ask_media'])
        await message.answer(texts[user_data['language']]['about_media'])
        await state.set_state(info.media)
    else:
        await message.answer(
            text=texts[user_data['language']]['wrong_introduction'],
            reply_markup=ReplyKeyboardRemove()
        )

@router.message(info.media, F.photo | F.video | F.text) # –ø—Ä–∏–º–µ–Ω—è–µ–º –º–∞–≥–∏—á–µ—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
async def media_chosen(message: Message, state: FSMContext):
    user_data = await state.get_data()
    count = user_data.get('count', 0) # —Å–æ–∑–¥–∞–µ–º —Å—á—ë—Ç—á–∏–∫ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ (—Ñ–æ—Ç–æ –∏/–∏–ª–∏ –≤–∏–¥–µ–æ)
    media_list = user_data.get('media_list', []) # —Å–æ–∑–¥–∞–µ–º –Ω–µ–∫–∏–π –∞–Ω–∞–ª–æ–≥ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –æ—Ç–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –≤ –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
    if count >= 10:
        await message.answer(texts[user_data['language']]['wrong_count'])
        return
    match message.content_type:
        case ContentType.VIDEO:
            count += 1
            media_id = message.video.file_id # –ø–æ–ª—É—á–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π id –≤–∏–¥–µ–æ—Ñ–∞–π–ª–∞
            media_type = "video"
        case ContentType.PHOTO:
            count += 1
            media_id = message.photo[-1].file_id # –ø–æ–ª—É—á–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π id —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏; photo[-1] –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ª—É—á—à–µ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç —Ç–µ–ª–µ–≥—Ä–∞–º–º–∞
            media_type = "photo"
        case _:
            await message.answer(texts[user_data['language']]['wrong_media'])
            return
    media_list.append((media_type, media_id)) # –¥–æ–±–∞–≤–ª—è–µ–º –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –≤ –º–∞—Å—Å–∏–≤ media_list
    await state.update_data(count=count, media_list=media_list)
    file_from_tg = await message.bot.get_file(media_id) # –ø–æ–ª—É—á–∞–µ–º –æ—Ç —Ç–µ–ª–µ–≥—Ä–∞–º–º–∞ —Ñ–∞–π–ª—ã –ø–æ –∏—Ö id
    file_name = f"{count}" # –Ω—É–º–µ—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –≤–Ω—É—Ç—Ä–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ 1.jpg, 2.mp4 –∏ —Ç.–¥.)
    await upload_media(message.bot, file_from_tg.file_path, file_name, user_data['user_id'], media_type) # —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –≤ –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
    if user_data['language'] == '–†—É—Å—Å–∫–∏–π': # —Å–æ–∑–¥–∞—ë–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —É—á–µ—Ç–æ–º —è–∑—ã–∫–æ–≤—ã—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π (–ª–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∞ –≤ count_message), –∫ –ø—Ä–∏–º–µ—Ä—É "–î–æ–±–∞–≤–ª–µ–Ω 1...", –Ω–æ "–î–æ–±–∞–≤–ª–µ–Ω–æ 2..."
        letter = "" if count == 1 else "–æ" 
        count_message = texts[user_data['language']]['count_media'].replace('${count}', str(count)).replace('${letter}', letter)
    else:
        count_message = texts[user_data['language']]['count_media'].replace('${count}', str(count))
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text=texts[user_data['language']]['finish'], callback_data="finish_media")]
    ]) # —Å–æ–∑–¥–∞–µ–º inline button, –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–æ—Ç–æ—Ä—É—é, –±–æ—Ç –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≤–µ—Ä—à–∏–ª –ø—Ä–æ—Ü–µ—Å—Å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤
    await message.answer(count_message, reply_markup=keyboard)

@router.callback_query(lambda cb: cb.data == 'finish_media') # —Åallback-—Ñ—É–Ω–∫—Ü–∏—è –≤–∞–∂–Ω–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã inline button, –∏–º–µ–Ω–Ω–æ —Å—é–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–ó–∞–≤–µ—Ä—à–∏—Ç—å"
async def callback_finish_media(callback_query, state: FSMContext):
    await callback_query.answer() # –º–µ—Ç–æ–¥ –¥–ª—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ callback-–∑–∞–ø—Ä–æ—Å
    user_data = await state.get_data()
    user_id = user_data.get("user_id")
    from handlers.start import cmd_start # –ø—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –¥—Ä—É–≥–æ–π handler
    await cmd_start(callback_query.message, state, user_id=user_id)
```
<p>–¢–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∞–Ω–∫–µ—Ç—ã –≤ –±–æ—Ç–µ. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ, –Ω–∞ —á—Ç–æ —è —Ö–æ—Ç–µ–ª –±—ã –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ, —Ç–∞–∫ –∫–∞–∫, –∫–∞–∫ –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —ç—Ç–æ –Ω–µ–º–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ, —Ç–∞–∫ —ç—Ç–æ –Ω–∞ –≤—ã–∑–æ–≤ —Ç–µ–∫—Å—Ç–∞ –≤ –æ–¥–Ω–æ–º state, –∞ —Ä–∞–±–æ—Ç–∞ —Å –Ω–∏–º –≤ –¥—Ä—É–≥–æ–º. –î–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏, –≤–æ–∑—å–º–µ–º —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∏–∑ –∫–æ–¥–∞ –≤—ã—à–µ.</p>

```python
async def age_chosen(message: Message, state: FSMContext):
    ...
        await message.answer(
            text=texts[user_data['language']]['ask_gender'], # –∑–¥–µ—Å—å –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ–±—ã –æ–Ω –≤—ã–±—Ä–∞–ª —Å–≤–æ–π –ø–æ–ª
            reply_markup=make_row_keyboard(icons['genders'])
        )
        await state.set_state(info.gender) # —Å—Ç–∞–≤–∏–º –Ω–æ–≤—ã–π state
    ...
async def gender_chosen(message: Message, state: FSMContext):
    ...
    if message.text in icons['genders']: # –∞ –≤ –Ω–æ–≤–æ–º state –º—ã –ø—Ä–æ–≤–æ–¥–∏–º –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ –µ—â–µ —Å—Ç–∞—Ä–æ–º—É state
        await state.update_data(gender = message.text) # –∏ –æ–±–Ω–æ–≤–ª—è–µ–º, –≤ —Å–ª—É—á–∞–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏
    ...
```
<p>–ú–æ–∂–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ç–æ, —á—Ç–æ —Ç–µ–∫—Å—Ç, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–µ –≤ —Å–≤–æ–µ–π —Ñ—É–Ω–∫—Ü–∏–∏. –ò–∑ –ø—Ä–∏–º–µ—Ä–∞ –≤—ã—à–µ <i>text=texts[user_data['language']]['ask_gender']</i> –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏–∏ <i>age_chosen</i>. –û—Å–æ–∑–Ω–∞–Ω–∏–µ —ç—Ç–æ–≥–æ —Ñ–∞–∫—Ç–∞, –ø–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ, –æ—á–µ–Ω—å —É—Å–∫–æ—Ä–∏–ª–æ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–¥–∞.</p> 
<p>–ò, –∫–∞–∫ –≤—ã –Ω–∞–≤–µ—Ä–Ω–æ–µ —É—Å–ø–µ–ª–∏ –∑–∞–º–µ—Ç–∏—Ç—å, —è –Ω–µ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à –≤ –ø–æ—è—Å–Ω–µ–Ω–∏—è—Ö, –ø–æ—ç—Ç–æ–º—É –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å –Ω–µ–º–Ω–æ–≥–æ –ø–æ–¥—ã—Ç–æ–∂–∏—Ç—å —Ç–æ, –æ —á–µ–º –≥–æ–≤–æ—Ä–∏–ª–æ—Å—å –≤—ã—à–µ.</p>

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ handler create.py?**
- –£–∑–Ω–∞–µ–º —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –£–∑–Ω–∞–µ–º –∏–º—è (–Ω–∏–∫–Ω–µ–π–º) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –£–∑–Ω–∞–µ–º –≤–æ–∑—Ä–∞—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –£–∑–Ω–∞–µ–º –ø–æ–ª –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –£–∑–Ω–∞–µ–º –Ω–µ–º–Ω–æ–≥–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- –ü–æ–ª—É—á–∞–µ–º –µ–≥–æ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –∏ –æ—Ç–≥—Ä—É–∂–∞–µ–º –∏—Ö –≤ –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
<p>–í—ã, –Ω–∞–≤–µ—Ä–Ω–æ–µ, –º–æ–≥–ª–∏ –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∑–¥–µ—Å—å –Ω–µ –±—ã–ª–æ. –ò —ç—Ç–æ –≤–µ—Ä–Ω–æ –ø–æ–¥–º–µ—á–µ–Ω–æ. –ü–æ –º–æ–∏–º —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º, —è —Å—á–∏—Ç–∞—é, —á—Ç–æ —Ç–∞–∫–æ–π –ø—Ä–æ—Ü–µ—Å—Å –¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ, –∫–æ—Ç–æ—Ä—ã–π –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç <i>–Ω–µ –¥–æ–ø–∏—Å–∞–Ω</i>.</p>
<p>–¢–µ–ø–µ—Ä—å –∂–µ, –º—ã –ø–ª–∞–≤–Ω–æ –º–æ–∂–µ–º –ø–µ—Ä–µ–π—Ç–∏ –≤ <i>start.py</i>, –∫–æ—Ç–æ—Ä—ã–π –∏ —è–≤–ª—è–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º handler —Å –∫–æ—Ç–æ—Ä—ã–º —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.</p>

```python
from aiogram import Router
from aiogram.filters import Command # Command –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ /"–∫–æ–º–∞–Ω–¥–∞"
from aiogram.types import Message
from aiogram.fsm.context import FSMContext
from database import get_user_data, show_user_data # show_user_data - —Ñ—É–Ω–∫—Ü–∏—è, –∏—Å–ø–æ–ª—å–∑—É—è—â–∞—è—Å—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –∞–Ω–∫–µ—Ç—ã 
from handlers.states import info

router = Router()

@router.message(Command("start")) # —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ router –Ω–∞ –∫–æ–º–∞–Ω–¥—É /start
async def cmd_start(message: Message, state: FSMContext, user_id: int = None):
    user_id = user_id or message.from_user.id # –ø–æ–ª—É—á–∞–µ–º id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ handler (—Ç.–∫. –≤ –Ω—ë–º –º—ã –ø–µ—Ä–µ–¥–∞–µ–º user_id –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏) –∏–ª–∏ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è /start –º–µ—Ç–æ–¥–æ–º message.from_user.id
    user = await get_user_data(user_id)
    if user: # –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ç–æ, –µ—Å—Ç—å –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
        await message.answer(await show_user_data({'user_id': user_id})) # –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–∫–∞–∑–∞ –∞–Ω–∫–µ—Ç—ã
        await state.set_state(info.menu) # –æ–±–Ω–æ–≤–ª—è–µ–º state
        from handlers.menu import menu
        await menu(message, state) # –ø–µ—Ä–µ–Ω–æ—Å–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–ª–µ–¥—É—é—â–∏–π handler 
    else:
        await state.set_state(info.create) # –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, —Ç–æ –Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –µ–≥–æ –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏–π handler –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–Ω–∫–µ—Ç—ã
        from handlers.create import cmd_form
        await cmd_form(message, state)
```
<p>Handler –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–π, –Ω–æ –æ—á–µ–Ω—å —É–ø—Ä–æ—â–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ –º–æ–º–µ–Ω—Ç–µ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤ –±–æ—Ç–∞. –ö–æ–Ω–µ—á–Ω–æ, –∫–æ–º–∞–Ω–¥—É <i>/start</i> –º–æ–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ <i>create.py</i>, –Ω–æ, –∫–∞–∫ –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞—Ö–æ—á–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞—Ç—å –∞–Ω–∫–µ—Ç—É –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∫–æ–¥–∞.</p>
<p>–ö—Ä–∞—Ç–∫–æ –æ –ø–æ–ª—å–∑–µ <i>start.py</i>: –ø—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ï—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç, —Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –µ–≥–æ –≤ <i>create.py</i>, –µ—Å–ª–∏ –µ—Å—Ç—å, —Ç–æ –≤ –Ω–∞—à —Å–ª–µ–¥—É—é—â–∏–π handler - <i>menu.py</i>.</p>

```python
from aiogram import Router, Bot
from aiogram.types import Message, ReplyKeyboardRemove, InlineKeyboardButton, InlineKeyboardMarkup, CallbackQuery
from aiogram.fsm.context import FSMContext
from database import show_user_data, update_user_data, delete_user_data, get_user_data, has_likes, get_session, get_was_liked_users, remove_from_was_liked, add_liked_user, add_viewed_user, make_match
from keyboards.simple_row import make_row_keyboard
from dictionary import texts, icons
from handlers.states import info
from handlers.start import cmd_start

router = Router()

@router.message(info.menu) # –æ—Å–Ω–æ–≤–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
async def menu(message: Message, state: FSMContext):
     async for db_session in get_session():
        if await has_likes(db_session, user_id=message.from_user.id) == True: # –¥–µ–ª–∞–µ–º –∑–∞–ø—Ä–æ—Å –∫ —Ñ—É–Ω–∫—Ü–∏–∏, –µ—Å—Ç—å –ª–∏ –∑–∞–ø–∏—Å–∏ –≤ was_liked –∏ –º–µ–Ω—è–µ–º —ç–º–æ–¥–∑–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ—Ç–≤–µ—Ç–∞
            was_liked = 'üì¨'
        else:
            was_liked = 'üì™'
        await message.answer(
            text="Navigation:\n1. Find someone\n2. Profile\n3. Your likes\n4. Contacts",
            reply_markup=make_row_keyboard(["üíñüîé", "üë§", was_liked,"‚Ñπ"])
        )
        await state.set_state(info.nav)

@router.message(info.nav)
async def navigation(message: Message, state: FSMContext):
    if message.text == "üíñüîé": # –∏–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª –∫–Ω–æ–ø–∫—É "–ü–æ–∏—Å–∫ –ø–∞—Ä—Ç–Ω–µ—Ä–∞", –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¥—Ä—É–≥–æ–π handler 
        from handlers.search import cmd_search
        await cmd_search(message, state)
    elif message.text == "üë§": # –∫–Ω–æ–ø–∫–∞ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å –∞–Ω–∫–µ—Ç–æ–π
        await message.answer(
            text="Navigation:\n1. Show my profile\n2. Change something\n3. Recreate profile\n4. Delete profile", # –∑–¥–µ—Å—å —Ä–∞—Å–ø–∏—Å–∞–Ω—ã –¥–µ–π—Å—Ç–≤–∏—è —Å –∞–Ω–∫–µ—Ç–æ–π (–Ω–∞–¥–µ—é—Å—å –Ω–∞ –≤–∞—à –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —É—Ä–æ–≤–Ω—è –ê2)
            reply_markup=make_row_keyboard(["üë§üñº", "üë§‚öô", "üë§üîÑ", "üë§üö´"])
        )
        await state.set_state(info.setting)
    elif message.text == 'üì¨' or message.text == 'üì™': # –¥–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É, –∫–æ—Ç–æ—Ä–∞—è –¥–∞–µ—Ç –ø–æ–ø–∞—Å—Ç—å –≤ "–∫–∞—Ä—É—Å–µ–ª—å" –∞–Ω–∫–µ—Ç, –∫–æ—Ç–æ—Ä—ã–µ –ª–∞–π–∫–Ω—É–ª–∏ –Ω–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async for db_session in get_session():
            user_id = message.from_user.id
            liked_users = await get_was_liked_users(db_session, user_id) # –∑–¥–µ—Å—å –º—ã –¥–µ–ª–∞–µ–º –∑–∞–ø—Ä–æ—Å –∫ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–¥–∞–µ—Ç –Ω–∞–º –∞–Ω–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Å –ª–∞–π–∫–Ω—É–ª–∏ –∏ –ø–æ–æ—á–µ—Ä–µ–¥–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏—Ö –Ω–∞—à–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
            if liked_users:
                next_user = liked_users.pop(0)
                await state.update_data(next_user_id=next_user.user_id)
                await message.answer(
                    text=f"Name: {next_user.name}\nAge: {next_user.age}\nGender: {next_user.gender}\nBio: {next_user.introduction}",
                    reply_markup=make_row_keyboard(["‚ù§Ô∏è", "üíî"])
                )
                if message.text == "‚ù§Ô∏è":
                    await add_liked_user(db_session, user_id, next_user.user_id)
                    match_created = await make_match(db_session, user_id, next_user.user_id)
                    if match_created:
                        await bot.send_message(chat_id=next_user.user_id, text="–£—Ä–∞, —Ç—ã —Å–æ–∑–¥–∞–ª –º—ç—Ç—á!")
                        await message.answer("–£—Ä–∞, —Ç—ã —Å–æ–∑–¥–∞–ª –º—ç—Ç—á!")
                    else:
                        await bot.send_message(chat_id=next_user.user_id, text="–ö—Ç–æ-—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏–ª –ª–∞–π–∫!")
                await state.set_state(info.choice)
                await add_viewed_user(db_session, user_id, next_user_id=next_user.user_id)
                await remove_from_was_liked(db_session, user_id, next_user.user_id)
                await navigation(message, state, bot)
            else:
                await message.answer("No more liked users.")
                await menu(message, state)
    elif message.text == "‚Ñπ": # –ø—Ä–æ—Å—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –¥–ª—è —Å–≤—è–∑–∏ —Å–æ –º–Ω–æ–π –∏ –≥—Ä—É–ø–ø–æ–π
        await message.answer("My creator: t.me/wayoki")
        await state.set_state(info.menu)
        await menu(message, state) # –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø—Ä–æ—Å—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –±–æ—Ç–∞ —Å —Å—Å—ã–ª–∫–∞–º–∏

@router.message(info.setting)
async def profile_setting(message: Message, state: FSMContext):
    if message.text == "üë§üñº": # –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç —É–≤–∏–¥–µ—Ç—å —Å–≤–æ—é –∞–Ω–∫–µ—Ç—É
        user_info = await show_user_data({'user_id': message.from_user.id}) 
        await message.answer(user_info)
        await state.set_state(info.menu)
        await menu(message, state)
    elif message.text == "üë§‚öô": # –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —á—Ç–æ-–ª–∏–±–æ –≤ —Å–≤–æ–µ–π –∞–Ω–∫–µ—Ç–µ
        await message.answer(
            text="What would you like to update?",
            reply_markup=make_row_keyboard(icons['updates'])
        )
        await state.set_state(info.update) # –ø–µ—Ä–µ–≤–æ–¥–∏–º –Ω–∞ state update
    elif message.text == "üë§üîÑ": # –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∞–Ω–∫–µ—Ç—É
        await delete_user_data(message.from_user.id) # —É–¥–∞–ª—è–µ–º –µ—ë –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        await state.set_state(info.create) # –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –µ–≥–æ –Ω–∞ handler create.py
        from handlers.create import cmd_form 
        await cmd_form(message, state)
    elif message.text == "üë§üö´": # –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å—Ç–æ —Ö–æ—á–µ—Ç —É–¥–∞–ª–∏—Ç—å –∞–Ω–∫–µ—Ç—É
        await delete_user_data(message.from_user.id)
        await message.answer(
            text="Your profile was deleted.\nIf you want to return, just press /start",
            reply_markup=ReplyKeyboardRemove()
        )
        await state.clear() # –æ—á–∏—â–∞–µ–º state, —Ç–∞–∫ –∫–∞–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–Ω–∫–µ—Ç—ã –Ω—É–∂–Ω–æ —Å–Ω–æ–≤–∞ –Ω–∞–ø–∏—Å–∞—Ç—å/–Ω–∞–∂–∞—Ç—å –Ω–∞ /start

@router.message(info.update)
async def update_data(message: Message, state: FSMContext):
    update_type = message.text.strip().lower() # –Ω–µ –ø–æ–º–Ω—é –∑–∞—á–µ–º, –Ω–æ –∑–∞—á–µ–º-—Ç–æ –Ω—É–∂–Ω–æ
    user_id = message.from_user.id
    user = await get_user_data(user_id) # –ø–æ–ª—É—á–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    if update_type in icons['updates']:
        await state.update_data(update_type = update_type)
    match update_type: # –µ—Å–ª–∏ –∫—Ä–∞—Ç–∫–æ, —Ç–æ –≤ –∫–∞–∂–¥–æ–º case —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è —Ç–∏–ø –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—Å–ø–ª—ã–≤–∞–µ—Ç –ø—Ä–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è; –≥–¥–µ pass - –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
        case "üéÇ":
            await message.answer(
                text=texts[user.language]['ask_age'],
                reply_markup=ReplyKeyboardRemove()
            )
        case "üìõ":
            await message.answer(
                text=texts[user.language]['ask_name'],
                reply_markup=ReplyKeyboardRemove()
            )
        case "üôã‚Äç‚ôÇÔ∏è/üôã‚Äç‚ôÄÔ∏è":
            await message.answer(
                text=texts[user.language]['ask_gender_wanna_find'],
                reply_markup=make_row_keyboard(icons['genders_wf'])
            )
        case "‚úçÔ∏è":
            await message.answer(
                text=texts[user.language]['about_introduction'],
                reply_markup=ReplyKeyboardRemove()
            )
            await message.answer(texts[user.language]['about_introduction'], reply_markup=ReplyKeyboardRemove())
        case "üåê":
            await message.answer(
                text='Choose a new language:', 
                reply_markup=make_row_keyboard(icons['languages'])
            )
        case "üì∏":
            pass
        case _:
            pass
    await state.set_state(info.waiting_for_new_value)

@router.message(info.waiting_for_new_value)
async def save_updated_data(message: Message, state: FSMContext):
    user_data = await state.get_data()
    update_type = user_data.get('update_type')
    user_id = message.from_user.id
    user = await get_user_data(user_id)
    if update_type == "üéÇ": # –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö (–ø–æ —Å—É—Ç–∏, –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –∏–∑ create.py)
        if message.text.isdigit() and 16 <= int(message.text) <= 60:
            await update_user_data(user_id, age = int(message.text))
        else:
            wrong = 'wrong_age' if not message.text.isdigit() else 'wrong_age2'
            await message.answer(texts[user.language][wrong], reply_markup=ReplyKeyboardRemove())
            await state(info.update)
    elif update_type == "üìõ":
        if len(message.text) <= 32:
            await update_user_data(user_id, name = message.text)
        else:
            await message.answer(text=texts[user.language]['wrong_name'], reply_markup=ReplyKeyboardRemove())
            await state(info.update)
    elif update_type == "üôã‚Äç‚ôÇÔ∏è/üôã‚Äç‚ôÄÔ∏è":
        if message.text in icons['genders_wf']:
            await update_user_data(user_id, gender_wf = message.text)
        else:
            await message.answer(text=texts[user.language]['wrong_gender'], reply_markup=make_row_keyboard(icons['genders_wf']))
            await state(info.update)
    elif update_type == "‚úçÔ∏è":
        if message.text and len(message.text) <= 2500:
            await update_user_data(user_id, introduction = message.text)
        else:
            await message.answer(text=texts[user.language]['wrong_introduction'], reply_markup=ReplyKeyboardRemove())
            await state(info.update)
    elif update_type == "üåê":
        match message.text:
            case "üá∑üá∫":
                await update_user_data(user_id, language = '–†—É—Å—Å–∫–∏–π')
            case "üá¨üáß":
                await update_user_data(user_id, language = 'English')
            case _:
                await message.answer(text=texts['English']['wrong_language'], reply_markup=make_row_keyboard(icons['languages']))
                await state(info.update)
    await message.answer(text="Updated successfully!", reply_markup=ReplyKeyboardRemove())
    await cmd_start(message, state)
```
<p>–î—É–º–∞—é, –Ω–∏ —É –∫–æ–≥–æ –Ω–µ –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç –≤–æ–ø—Ä–æ—Å–∞, –ø–æ—á–µ–º—É —ç—Ç–æ—Ç handler –≤–∞–∂–µ–Ω –¥–ª—è –±–æ—Ç–∞, –≤–µ–¥—å –æ–Ω –±—É–∫–≤–∞–ª—å–Ω–æ —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º –≤–æ –≤—Å—ë–º –±–æ—Ç–µ.</p>

**–ö–∞–∫–∏–µ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ handler menu.py?**
- –ü–æ–∏—Å–∫ —á—É–∂–∏—Ö –∞–Ω–∫–µ—Ç
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–µ–π –∞–Ω–∫–µ—Ç—ã
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —Å—Ç–µ–Ω–¥ —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã: –∏–º—è, –≤–æ–∑—Ä–∞—Å—Ç, –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è, —Ñ–æ—Ç–æ, —è–∑—ã–∫ - –≤—Å—ë –º–µ–Ω—è–µ—Ç—Å—è
- –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã
<p>–ö–∞–∫ –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —Ä–∞–∑–±–∏—Ä–∞—Ç—å <i>states.py</i> - —Ñ–∞–π–ª, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤—Å–µ states, –Ω–µ –∏–º–µ–µ—Ç –æ—Å–æ–±–æ–≥–æ —Å–º—ã—Å–ª–∞, —Ç–∞–∫ –∫–∞–∫ —É –≤–∞—Å –æ–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–ª–∏—á–Ω—ã –æ—Ç –º–æ–∏—Ö –∏, –µ—Å–ª–∏ –≤—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ –ø—Ä–∏–Ω—Ü–∏–ø –∏—Ö —Ä–∞–±–æ—Ç—ã, —Ç–æ –æ–±—ä—è—Å–Ω—è—Ç—å, –≤ —Ü–µ–ª–æ–º-—Ç–æ, –∏ –Ω–µ—á–µ–≥–æ. –ö –Ω–∏–º –∂–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∏ <i>bot.py</i>, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è, –ø–æ —Å—É—Ç–∏, –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–æ–π, –∑–∞–ø—É—Å–∫–∞—é—â–µ–π –≤–∞—à–∏ handlers. –ï—ë –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ —Å–∏–ª—å–Ω–æ —Ä–∞–∑–ª–∏—á–∞–µ—Ç—Å—è (—Ç–æ–ª—å–∫–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º include_router), –ø–æ—ç—Ç–æ–º—É —è –Ω–µ —Ö–æ—á—É —Ç—Ä–∞—Ç–∏—Ç—å –Ω–∞ –Ω–µ—ë –≤—Ä–µ–º—è. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ, –Ω–µ –∑–∞–±—ã–≤–∞–π—Å—è –∑–∞—Ö–æ–¥–∏—Ç—å –≤ <i>bot.py</i> –∏ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ routers –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ handler. –ü—Ä–æ <i>dictionary.py</i> —è –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–º–æ–ª—á—É. –ï—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—Ç–µ, —á—Ç–æ —Ç–∞–∫–æ–µ —Å–ª–æ–≤–∞—Ä—å, —Ç–æ –±–µ–≥–æ–º —á–∏—Ç–∞—Ç—å –≥–∞–π–¥—ã –ø–æ Python.
<p>–ü–æ—ç—Ç–æ–º—É —Å–µ–π—á–∞—Å –º—ã –ø–ª–∞–≤–Ω–æ –º–æ–∂–µ–º –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å—Å—è –∫ <i>search.py</i> - –ø–æ—Å–ª–µ–¥–Ω–µ–º—É (–ø–æ–∫–∞ —á—Ç–æ) handler –≤ –º–æ—ë–º –±–æ—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –∏ –æ—Ü–µ–Ω–∫–∏ –∞–Ω–∫–µ—Ç –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.</p>

```python
from aiogram import Router
from aiogram.types import ReplyKeyboardRemove
from keyboards.simple_row import make_row_keyboard
from database import get_next_user, get_session, add_liked_user, add_viewed_user, make_match # —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏, "–ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π", –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ª–∞–π–∫–æ–≤ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
from handlers.menu import menu
from aiogram.types import Message
from aiogram.fsm.context import FSMContext
from handlers.states import info

router = Router()

@router.message(info.search)
async def cmd_search(message: Message, state: FSMContext):
    async for db_session in get_session(): # –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Å–µ—Å—Å–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ sqlalchemy
        user_id = message.from_user.id
        next_user = await get_next_user(db_session, user_id) # —Ñ—É–Ω–∫—Ü–∏—è, –¥–∞—é—â–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∞–Ω–∫–µ—Ç—É —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        if next_user:
            await state.update_data(next_user_id=next_user.user_id)
            await message.answer(
                text=f"Name: {next_user.name}\nAge: {next_user.age}\nGender: {next_user.gender}\nBio: {next_user.introduction}", # –∑–¥–µ—Å—å –µ—â–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã; –±–æ—Ç –≤—ã–¥–∞–µ—Ç –∞–Ω–∫–µ—Ç—É –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è "–æ—Ü–µ–Ω–∏–≤–∞–Ω–∏—è"
                reply_markup=make_row_keyboard(["‚ù§Ô∏è", "üíî"])
            )
            await state.set_state(info.choice)
        else:
            await message.answer("No more new profiles available.") # —Å–æ–æ–±—â–µ–Ω–∏–µ, –≤–æ–∑–Ω–∏–∫–∞—é—â–µ–µ, –∫–æ–≥–¥–∞ –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±—ã–ª–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω—ã
            await menu(message, state)

@router.message(info.choice)
async def choose(message: Message, state: FSMContext, bot: Bot):
    async for db_session in get_session():
        next_user_id = await state.get_data()
        next_user_id = next_user_id.get("next_user_id")
        user_id = message.from_user.id
        if message.text == "‚ù§Ô∏è":
            await add_liked_user(db_session, user_id, next_user_id) # –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ç–∞–±–ª–∏—Ü—É user_likes
            match_created = await make_match(db_session, user_id, next_user_id)
            if match_created:
                await bot.send_message(chat_id=next_user_id, text="–£—Ä–∞, —Ç—ã —Å–æ–∑–¥–∞–ª –º—ç—Ç—á!")
                await message.answer("–£—Ä–∞, —Ç—ã —Å–æ–∑–¥–∞–ª –º—ç—Ç—á!")
            else:
                await bot.send_message(chat_id=next_user_id, text="–ö—Ç–æ-—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏–ª –ª–∞–π–∫")
        await add_viewed_user(db_session, user_id, next_user_id) # –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —á—É–∂–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ç–∞–±–ª–∏—Ü—É user_views –Ω–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –∫ —Ç–∞–∫–æ–π –Ω–µ—Ö–∏—Ç—Ä–æ–π –ª–æ–≥–∏–∫–µ —è –ø—Ä–∏—à–µ–ª, —á—Ç–æ–±—ã –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –∞–Ω–∫–µ—Ç—ã –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å –æ–¥–Ω–æ–º—É –∏ —Ç–æ–º—É –∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        await cmd_search(message, state) # –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±—Ä–∞—Ç–Ω–æ –≤ –ø–æ–∏—Å–∫ –Ω–æ–≤—ã—Ö –∞–Ω–∫–µ—Ç
```
<p>–•–æ—á–µ—Ç—Å—è —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø—Ä–∏–º–∏—Ç–∏–≤–µ–Ω, —Å —á–µ–º —è –Ω–µ –±—É–¥—É —Å–ø–æ—Ä–∏—Ç—å. –ù–æ –ø–æ–º–Ω–∏—Ç–µ –º–æ—ë —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∫ –ø—Ä–æ—Å—Ç–æ—Ç–µ? –¢–æ –ª–∏ –æ—Ç –ª–µ–Ω–∏, —Ç–æ –ª–∏ –æ—Ç –Ω–µ–∑–Ω–∞–Ω–∏—è, —Ç–æ –ª–∏ –æ—Ç –±–æ–ª—å—à–æ–≥–æ —É–º–∞ —è –Ω–µ —Ö–æ—Ç–µ–ª –¥–æ–±–∞–≤–ª—è—Ç—å –≤ –±–æ—Ç —Å–ª–æ–∂–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤. –•–æ—Ç–µ–ª–æ—Å—å –æ—Å—Ç–∞–≤–∏—Ç—å —á–µ–ª–æ–≤–µ–∫–∞ –≤–æ–ª—å–Ω—ã–º –≤ –≤—ã–±–æ—Ä–µ, –∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –µ–≥–æ –Ω–∞ –ø—É—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º–∏–∑–∞—Ü–∏–∏.</p>
<p>–ò...—Ö–æ—á—É –≤–∞—Å –ø–æ–∑–¥—Ä–∞–≤–∏—Ç—å! –í—ã, –∫–∞–∫ –∏ —è, –æ—Ç–º—É—á–∞–ª–∏—Å—å —Å —á–∞—Å—Ç—å—é aiogram. –°–æ–≤—Ä—É, –µ—Å–ª–∏ —Å–∫–∞–∂—É, —á—Ç–æ –æ–Ω–∞ –±—ã–ª–∞ –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω–æ–π, —Å–∫–æ—Ä–µ–µ –∫—Ä–æ–ø–æ—Ç–ª–∏–≤–æ–π. –í–µ–¥—å –Ω–∞—Å—Ç–æ—è—â–∏–π —É–∂–∞—Å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –≥–¥–µ —è –ø–æ–ª—É—á–∏–ª –Ω–µ–∏–º–æ–≤–µ—Ä–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ–ª–æ–≤–Ω—è–∫–∞ –∏–∑-–∑–∞, –∑–∞—á–∞—Å—Ç—É—é, —Ç–æ—Ç–∞–ª—å–Ω–æ–≥–æ –Ω–µ–ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–æ–≥–æ, —á—Ç–æ –¥–µ–ª–∞—é. –ù–æ, –∫–∞–∫ –≥–æ–≤–æ—Ä–∏—Ç—Å—è, —á—Ç–æ –Ω–µ –ª–æ–º–∞–µ—Ç - –¥–µ–ª–∞–µ—Ç —Å–∏–ª—å–Ω–µ–µ.</p>
<h2><b>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ "–≤–∑—Ä–æ—Å–ª–æ–º—É" –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é: docker</b></h2>
<p>–ü–æ—Å–ª–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –±–æ—Ç–∞ –Ω–∞ python + aiogram —è –ø—Ä–∏—Å—Ç—É–ø–∏–ª –∫ –∏–∑—É—á–µ–Ω–∏—é —Ä–∞–Ω–µ–µ –Ω–µ–∏–∑–≤–µ–¥–∞–Ω–Ω–æ–π —Ç—Ä–æ–ø—ã. –ú–Ω–µ –±—ã–ª–æ –≤–∞–∂–Ω–æ —É–∂–µ –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –≤ –±—É–¥—É—â–µ–º "—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ —Ä–µ–ª—å—Å—ã" –±–æ—Ç–∞. –ù–µ–º–Ω–æ–≥–æ –≤–Ω–∏–∫–Ω—É–≤, —è –ø–æ–Ω—è–ª, —á—Ç–æ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω—É–∂–Ω–æ –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –∞ –¥–ª—è –±–µ—Å–ø–µ—Ä–µ–±–æ–π–Ω–æ–π —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ - <i>–≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞</i>. –ù—É–∂–Ω–æ –±—ã–ª–æ —Å–æ–∑–¥–∞—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª–∫—É, –Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏–≤ –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ –º–æ—ë–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ. –ü–æ —Å–æ–≤–µ—Ç—É —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞, —è –Ω–∞—á–∞–ª —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å <i>docker</i> - –ø—Ä–æ–≥—Ä–∞–º–º—É –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (–≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –±–æ—Ç–æ–≤) –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ –æ—Ç –≤–Ω–µ—à–Ω–µ–π —Å—Ä–µ–¥—ã (–û–°) –º–µ—Ç–æ–¥–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏ (–∏–∑–æ–ª—è—Ü–∏–∏) –ø—Ä–æ–µ–∫—Ç–∞. –ü–æ—Å–ª–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –º–∏–Ω–∏-–∫—É—Ä—Å–∞ (—Å—Å—ã–ª–∫–∞ –≤ –°–ø–∏—Å–∫–µ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã) —è –Ω–∞—á–∞–ª —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—Ä–∞–∑—ã –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è –º–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.</p>
<p>–ì–∞–π–¥ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ docker desktop —Å–º–µ—à–æ–Ω, –ø–æ—ç—Ç–æ–º—É –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—é, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ñ–∞–π–ª–∞—Ö: <i>Dockerfile</i> –∏ <i>docker-compose.yaml</i>.</p>

```docker
FROM python:3.13-slim # –≤—ã–±–∏—Ä–∞–µ–º –≤–µ—Ä—Å–∏—é python (—è –≤—ã–±—Ä–∞–ª –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–∞ –º–æ–º–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—è –±–æ—Ç–∞)
WORKDIR /bot # –≤—ã–±–∏—Ä–∞–µ–º —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é /app)
RUN apt-get update && apt-get install -y iputils-ping # –º–Ω–æ–≥–æ —É–º–Ω—ã—Ö —Å–ª–æ–≤, –Ω–æ –∫—Ä–∞—Ç–∫–æ, –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å—è–∫–∏–µ –ø–∞–∫–µ—Ç—ã (ping –∂–µ –±—ã–ª –¥–æ–±–∞–≤–ª–µ–Ω –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –º–æ–∂–Ω–æ –Ω–µ –¥–æ–±–∞–≤–ª—è—Ç—å)
COPY requirements.txt . # –∫–æ–ø–∏—Ä—É–µ–º –≤—Å–µ —Ç—Ä–µ–±—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏–∑ requirements.txt (–æ –Ω–µ–º —á—É—Ç—å –ø–æ–∑–∂–µ)
RUN pip install --no-cache-dir -r requirements.txt # —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
COPY . . # –∫–æ–ø–∏—Ä—É–µ–º –Ω–∞—à –ø—Ä–æ–µ–∫—Ç –≤–Ω—É—Ç—Ä—å docker 
CMD [ "python", "bot.py" ] # —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–≤ –º–æ—ë–º —Å–ª—É—á–∞–µ, –≤—Å–µ handlers –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ routers, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ dp (dispatcher) –≤ bot.py
```
<p>–ö–∞–∫ –∏ –æ–±–µ—â–∞–ª, –Ω–µ–º–Ω–æ–≥–æ —Ä–∞—Å—Å–∫–∞–∂—É –æ <i>requirements.txt</i>. –≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ –∏—Ö –≤–µ—Ä—Å–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ docker, –ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏, –¥–æ–±—Ä–æ–ø–æ—Ä—è–¥–æ—á–Ω–æ –Ω–∞–º —Å–∫–∞—á–∞–µ—Ç –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç.</p>

```txt
aiogram==3.13.1 # aiogram - –Ω–∞–∑–≤–∞–Ω–∏–µ, 3.13.1 - –≤–µ—Ä—Å–∏—è
pydantic-settings==2.5.2 # pydantic - –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
surrogates==1.0.2 # –¥–ª—è sqlaclhemy
asyncpg==0.30.0 # –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å PostgreSQL
alembic==1.14.0 # –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
sqlalchemy[asyncio]==2.0.36 # —Å–∞–º sqlalchemy
boto3==1.35.85 # –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –æ–±–ª–∞—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
```

<p>–ö–∞–∫ –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è, –Ω–∏—á–µ–≥–æ —Å–ª–æ–∂–Ω–æ–≥–æ –ø–æ–∫–∞ –Ω–µ—Ç, –ø–æ—ç—Ç–æ–º—É –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ docker-compose.yaml</p>

```yaml
services:
  postgres: 
    image: postgres:latest # –ø–æ–¥–≥—Ä—É–∂–∞–µ–º –æ–±—Ä–∞–∑ postgres –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤ docker
    environment: # —Å–æ–∑–¥–∞—ë–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
      POSTGRES_USER: ${POSTGRES_USER} # –∏–º—è —Å–æ–∑–¥–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Ç–æ–µ—Å—Ç—å –º–æ–π)
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD} # –ø–∞—Ä–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞
      POSTGRES_NAME: ${POSTGRES_NAME} # –Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    networks:
      - tg_network # —Å–µ—Ç—å –¥–ª—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –¥–≤—É—Ö –æ–±—Ä–∞–∑–æ–≤: postgres –∏ –Ω–∞—à bot (–¥–∞, —ç—Ç–æ —Ç–æ–∂–µ –æ–±—Ä–∞–∑)
    ports:
      - ${POSTGRES_PORT}:${POSTGRES_PORT} # –ø–æ—Ä—Ç—ã –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
    volumes:
      - pg_data:/var/lib/postgresql/data # –ø—Ä–æ—Å—Ç–æ –Ω–∞–¥–æ

  bot:
    build: .
    volumes:
      - .:/bot
    restart: always
    environment:
      BOT_TOKEN: ${BOT_TOKEN}  # bot_token –∫–æ—Ç–æ—Ä—ã–π –º—ã –ø–æ–ª—É—á–∏–ª–∏ –≤ BotFather
    networks:
      - tg_network
    depends_on: 
      - postgres

networks: # —Å–æ–∑–¥–∞–µ–º —Å–µ—Ç—å
  tg_network:
    driver: bridge

volumes:
  pg_data:
```
<p>–ù–∞—à docker –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ. –¢–µ–ø–µ—Ä—å –∑–∞–ø–æ–º–∏–Ω–∞–µ–º –≤—Å–µ–≥–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–º–∞–Ω–¥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª—å–Ω–æ –Ω—É–∂–Ω—ã –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å docker.</p>

```shell
docker build -t 'name' . # –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Ö —Å–∞–º—ã—Ö –æ–±—Ä–∞–∑–æ–≤ –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker compose up -d # –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è "–≤–∫–ª—é—á–µ–Ω–∏—è" –Ω–∞—à–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker compose down # –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è "–æ—Ç–∫–ª—é—á–µ–Ω–∏—è" –Ω–∞—à–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps # –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
docker exec -it <id –∏–ª–∏ –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞> bash # –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—Ö–æ–¥–∞ –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (bash - –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä, —É–∫–∞–∑–∞–Ω –∫ –ø—Ä–∏–º–µ—Ä—É)
docker compose restart # —Å–∞–º–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ –∫–æ–¥–µ
```
<p>–õ–∏—á–Ω–æ –º–Ω–µ —ç—Ç–∏—Ö –∫–æ–º–∞–Ω–¥ –±–æ–ª–µ–µ —á–µ–º —Ö–≤–∞—Ç–∏–ª–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å docker. –í—ã –º–æ–∂–µ—Ç–µ, –∫–æ–Ω–µ—á–Ω–æ, —É–≥–ª—É–±–∏—Ç—å—Å—è –≤ —ç—Ç—É —Ç–µ–º—É –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –µ—â–µ —Å–ø—Ä–∞–≤–æ—á–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.</p>
<p>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ –≤—Å–µ–º—É —Å–∞–º–æ–º—É –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–º—É –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∞. –ï—Å–ª–∏ –≤—ã –¥–æ—à–ª–∏ –¥–æ —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞, —Ç–æ –∑–Ω–∞–π—Ç–µ, —á—Ç–æ —É–∂–µ –ø—Ä–æ–¥–µ–ª–∞–ª–∏ –Ω–µ–ø–ª–æ—Ö—É—é —Ä–∞–±–æ—Ç—É –Ω–∞–¥ —Å–æ–±–æ–π! –ù–æ –ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –¥–∞–ª—å—à–µ - —Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–µ–µ, —Å–ª–æ–∂–Ω–µ–µ –∏... —Å–ª–æ–∂–Ω–µ–µ. –ù—É —á—Ç–æ, –≤–ø–µ—Ä—ë–¥?</p>
<h2><b>–ù–∞—á–∞–ª–æ —á–µ–≥–æ-—Ç–æ –Ω–æ–≤–æ–≥–æ: SQLalchemy –∏ alembic</b></h2>
<p>–í–æ—Ç –º—ã –∏ –¥–æ–±—Ä–∞–ª–∏—Å—å –¥–æ —ç—Ç–∞–ø–∞, –∫–æ–≥–¥–∞ –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã –∏ –≤—Å—è–∫–∏–µ —Ç–∞–º alembic —Å—Ç–∞–Ω—É—Ç –¥–ª—è –Ω–∞—Å —á–µ–º-—Ç–æ –±–æ–ª–µ–µ –æ—Å—è–∑–∞–µ–º—ã–º, —á–µ–º –ø—Ä–æ—Å—Ç–æ —Å–ª–æ–≤–∞. –ö–∞–∫ —Ä–∞–∑-—Ç–∞–∫–∏ —Å –Ω–µ–≥–æ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞—é –Ω–∞—á–∞—Ç—å.</p>
<p>–ß—Ç–æ –∂–µ —Ç–∞–∫–æ–µ alembic? –ï—Å–ª–∏ –∫—Ä–∞—Ç–∫–æ, —Ç–æ –¥–æ–≤–æ–ª—å–Ω–æ —Ö–æ—Ä–æ—à–∏–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è —Ç–∞–±–ª–∏—Ü –≤ SQL. –° –µ–≥–æ –ø–æ–º–æ—â—å—é –¥–æ–≤–æ–ª—å–Ω–æ –ª–µ–≥–∫–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏—Ö. –ò, –∫–æ–Ω–µ—á–Ω–æ –∂–µ, –Ω–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –Ω—É–∂–Ω–æ –µ—â–µ —Å–æ–∑–¥–∞—Ç—å —á—Ç–æ-—Ç–æ, —á—Ç–æ –º–æ–∂–Ω–æ –∫—É–¥–∞-—Ç–æ —Ç–∞–º –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ —Ç.–ø. –ü–æ—ç—Ç–æ–º—É –º—ã –ø–ª–∞–≤–Ω–æ –¥–µ–ª–∞–µ–º –≤—Ö–æ–¥ –≤ –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö —Å—Ç—Ä–∞—à–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ - <i>database.py</i>, –∫–æ—Ç–æ—Ä—ã–π, –ø–æ–∫–∞ —á—Ç–æ, —è–≤–ª—è–µ—Ç—Å—è "–∑–∞–ª–µ–∂—å—é —Ö–ª–∞–º–∞" (–æ—á–µ–Ω—å –≤–∞–∂–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±–ª–∞—á–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º, –Ω–æ –ø–æ–ª—É—á–∏–ª —Ç–∞–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ —è –Ω–µ –∑–Ω–∞—é, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–∫–∏–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ –ø—Ä–æ–µ–∫—Ç—É).</p>
<p>–í—Å—Ç—Ä–µ—á–∞–µ—Ç –æ–Ω –Ω–∞—Å –¥–æ–≤–æ–ª—å–Ω–æ –º–∏—Ä–æ–ª—é–±–∏–≤–æ–π —Ç–∞–±–ª–∏—á–∫–æ–π</p>

```python
from sqlalchemy import Column, Integer, String, BigInteger, ForeignKey, UniqueConstraint
from sqlalchemy.ext.asyncio import create_async_engine, AsyncSession
from sqlalchemy.orm import sessionmaker, declarative_base, relationship, selectinload
from sqlalchemy.future import select
from sqlalchemy.sql.expression import func, and_
from config_reader import config

Base = declarative_base()

class User(Base): # —Å–æ–∑–¥–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é —Ç–∞–±–ª–∏—Ü—É User
    __tablename__ = 'users'
    user_id = Column(BigInteger, primary_key=True)
    name = Column(String, nullable=False)
    age = Column(Integer, nullable=False)
    gender = Column(String, nullable=False)
    gender_wf = Column(String, nullable=False)
    introduction = Column(String, nullable=True)
    language = Column(String, nullable=False)
    views = relationship( # –∑–¥–µ—Å—å –∂–µ –º—ã –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ–º –¥–æ–ø.—Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, —Ç–∞–∫–∏–µ –∫–∞–∫: –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ –∞–Ω–∫–µ—Ç—ã, –ª–∞–π–∫–Ω—É—Ç—ã–µ –∞–Ω–∫–µ—Ç—ã, –∞–Ω–∫–µ—Ç—ã, —á—å–∏ –ª–∞–π–∫–∏ –º—ã –ø–æ–ª—É—á–∏–ª–∏ –∏ –º—ç—Ç—á–∏
        "UserView",
        back_populates="user",
        foreign_keys="[UserView.user_id]",
        lazy="selectin"
    )
    likes = relationship(
        "UserLike",
        back_populates="user",
        foreign_keys="[UserLike.user_id]",
        lazy="selectin"
    )
    was_liked = relationship(
        "UserWasLiked",
        back_populates="user",
        foreign_keys="[UserWasLiked.user_id]",
        lazy="selectin"
    )
    matches_user_1 = relationship(
        "UserMatch",
        back_populates="user_1",
        foreign_keys="[UserMatch.user_1_id]",
        lazy="selectin"
    )
    matches_user_2 = relationship(
        "UserMatch",
        back_populates="user_2",
        foreign_keys="[UserMatch.user_2_id]",
        lazy="selectin"
    )

class UserView(Base):
    __tablename__ = 'user_views'
    id = Column(BigInteger, primary_key=True, autoincrement=True)
    user_id = Column(BigInteger, ForeignKey('users.user_id', ondelete='CASCADE'), nullable=False)
    viewed_user_id = Column(BigInteger, ForeignKey('users.user_id', ondelete='CASCADE'), nullable=False)
    user = relationship("User", back_populates="views", foreign_keys=[user_id])
    viewed_user = relationship("User", foreign_keys=[viewed_user_id])
    __table_args__ = (UniqueConstraint('user_id', 'viewed_user_id', name='_user_view_uc'),)

class UserLike(Base):
    __tablename__ = 'user_likes'
    id = Column(BigInteger, primary_key=True, autoincrement=True)
    user_id = Column(BigInteger, ForeignKey('users.user_id', ondelete='CASCADE'), nullable=False)
    liked_user_id = Column(BigInteger, ForeignKey('users.user_id', ondelete='CASCADE'), nullable=False)
    user = relationship("User", back_populates="likes", foreign_keys=[user_id])
    liked_user = relationship("User", foreign_keys=[liked_user_id])
    __table_args__ = (UniqueConstraint('user_id', 'liked_user_id', name='_user_like_uc'),)

class UserWasLiked(Base):
    __tablename__ = 'was_liked'
    id = Column(BigInteger, primary_key=True, autoincrement=True)
    user_id = Column(BigInteger, ForeignKey('users.user_id', ondelete='CASCADE'), nullable=False)
    liked_user_id = Column(BigInteger, ForeignKey('users.user_id', ondelete='CASCADE'), nullable=False)
    user = relationship("User", foreign_keys=[user_id], lazy="selectin")
    liked_user = relationship("User", foreign_keys=[liked_user_id], lazy="selectin")
    __table_args__ = (UniqueConstraint('user_id', 'liked_user_id', name='_was_liked_uc'),)

class UserMatch(Base):
    __tablename__ = 'user_matches'
    id = Column(BigInteger, primary_key=True, autoincrement=True)
    user_1_id = Column(BigInteger, ForeignKey('users.user_id', ondelete='CASCADE'), nullable=False)
    user_2_id = Column(BigInteger, ForeignKey('users.user_id', ondelete='CASCADE'), nullable=False)
    user_1 = relationship("User", foreign_keys=[user_1_id])
    user_2 = relationship("User", foreign_keys=[user_2_id])
    __table_args__ = (UniqueConstraint('user_1_id', 'user_2_id', name='_user_match_uc'),)

DATABASE_URL = f"postgresql+asyncpg://{config.POSTGRES_USER.get_secret_value()}:{config.POSTGRES_PASSWORD.get_secret_value()}@{config.POSTGRES_HOST}/{config.POSTGRES_NAME}" # —Å–æ–∑–¥–∞—ë–º database_url
engine = create_async_engine(DATABASE_URL, echo=True) # —Å–æ–∑–¥–∞—ë–º –¥–≤–∏–∂–æ–∫
```
<p>–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—á–∫–∏, –Ω—É–∂–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –µ—ë —á–µ—Ä–µ–∑ alembic. –î–µ–ª–∞–µ–º –Ω–µ—Ö–∏—Ç—Ä—ã–µ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏, –∞ –∏–º–µ–Ω–Ω–æ, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º alembic</p>

```shell
alembic init alembic
```
<p>–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —É –≤–∞—Å –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è: <i>alembic.ini</i> –∏ <i>alembic/env.py</i></p>
<p>–í alembic –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ, —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –≥–µ–º–æ—Ä—Ä–æ–π, —Ç–∞–∫ —ç—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ <i>env.py</i>. –Ø, –∫–æ–Ω–µ—á–Ω–æ, –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å —á—Ç–æ-—Ç–æ –æ–±—ä—è—Å–Ω–∏—Ç—å, –Ω–æ, —Å–∫–∞–∂—É —á–µ—Å—Ç–Ω–æ, —Å–∞–º –Ω–µ –æ—á–µ–Ω—å –ø–æ–Ω—è–ª, –∫–∞–∫ —É –º–µ–Ω—è —ç—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å.</p>

```python
from logging.config import fileConfig
from sqlalchemy import engine_from_config, pool
from alembic import context
from config_reader import config as settings
from database import Base

config = context.config

if config.config_file_name is not None:
    fileConfig(config.config_file_name)

config.set_main_option("sqlalchemy.url", settings.database_url_asyncpg)

target_metadata = Base.metadata

def run_migrations_offline() -> None:
    url = config.get_main_option("sqlalchemy.url")
    context.configure(
        url=url,
        target_metadata=target_metadata,
        literal_binds=True,
        dialect_opts={"paramstyle": "named"},
    )

    with context.begin_transaction():
        context.run_migrations()

def run_migrations_online() -> None:
    connectable = engine_from_config(
        config.get_section(config.config_ini_section, {}),
        prefix="sqlalchemy.",
        poolclass=pool.NullPool,
    )

    with connectable.connect() as connection:
        context.configure(
            connection=connection, target_metadata=target_metadata
        )
        with context.begin_transaction():
            context.run_migrations()

if context.is_offline_mode():
    run_migrations_offline()
else:
    run_migrations_online()
```
<p><i>–ù–∞ —ç—Ç–∞–ø–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ —Å—é–¥–∞, —è –≤—Å—ë –∂–µ –æ—Å–æ–∑–Ω–∞–ª, —á—Ç–æ –º–Ω–µ –Ω–µ –ø–æ–¥ —Å–∏–ª—É –æ–±—ä—è—Å–Ω–∏—Ç—å —Ç–æ, —á—Ç–æ —Ç—É—Ç –Ω–∞–ø–∏—Å–∞–Ω–æ. –ü–æ—ç—Ç–æ–º—É –ª—é–±–µ–∑–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é –µ—â–µ –æ–¥–Ω—É —Å—Å—ã–ª–æ—á–∫—É (—Å–∞–º–∏ –∑–Ω–∞–µ—Ç–µ –≥–¥–µ). –°–ø–∞—Å–∏–±–æ.</i></p>
<p>–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ <i>env.py</i> –º–æ–∂–µ–º —Å–º–µ–ª–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é. –î–µ–ª–∞–µ—Ç—Å—è —ç—Ç–æ, –Ω–∞ —É–¥–∏–≤–ª–µ–Ω–∏–µ...–æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ.</p>

```bash
alembic revision --autogenerate -m "–û–ø–∏—Å–∞–Ω–∏–µ" # –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏
alembic upgrade head # –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏
alembic downgrade # –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è "–æ—Ç–∫–∞—Ç–∞"
```
<p><b>–í–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç:</b> –ø—Ä–æ–ø–∏—Å—ã–≤–∞–Ω–∏–µ —ç—Ç–∏—Ö –∫–æ–º–∞–Ω–¥ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–Ω—É—Ç—Ä–∏ docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–µ—â–µ –ø–æ–º–Ω–∏—Ç–µ docker exec ...?). –ò, –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º, —Å–æ–≤–µ—Ç—É—é –∑–∞–ª–µ–∑–∞—Ç—å –≤ <i>alembic/versions/"–∏–º—è –º–∏–≥—Ä–∞—Ü–∏–∏"</i> –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ (–≤ —Å–ª—É—á–∞–µ —á–µ–≥–æ, –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–≥–æ –µ—ë —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è).</p>
<p>–°–ª–∞–±–æ –≤–µ—Ä–∏—Ç—Å—è, –Ω–æ –µ—Å–ª–∏ –≤—ã —Å–º–æ–≥–ª–∏ –ø—Ä–æ–π—Ç–∏ –¥–∞–∂–µ —ç—Ç–æ –∏—Å–ø—ã—Ç–∞–Ω–∏–µ (–ª–∏—á–Ω–æ –¥–ª—è –º–µ–Ω—è, alembic —Å—Ç–∞–ª –æ–¥–Ω–æ–π –∏–∑ —Å–∞–º—ã—Ö –Ω–µ–ø—Ä–∏—è—Ç–Ω—ã—Ö —á–∞—Å—Ç–µ–π), —Ç–æ –≤—ã —Ç–æ—á–Ω–æ –≥–æ—Ç–æ–≤—ã –∫ –¥–∞–ª—å—à–µ–π—à–∏–º "—É–∂–∞—Å–∞–º". –ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ —É –≤–∞—Å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –í –º–æ—ë–º —Å–ª—É—á–∞–µ, —ç—Ç–æ <i>PgAdmin</i> (–≥–∞–π–¥ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –≤ –°–ø–∏—Å–∫–µ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã). –ú–Ω–µ –¥–æ–≤–æ–ª—å–Ω–æ —Å–ª–æ–∂–Ω–æ –±—É–¥–µ—Ç —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –ø—Ä–æ –Ω–∏—Ö, —Ç–∞–∫ –∫–∞–∫ —Ä–µ—à–µ–Ω–∏–π –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–Ω–æ–≥–æ –∏ —è –Ω–µ –º–æ–≥—É –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å, —á–µ–º –≤—ã –∑–∞—Ö–æ—Ç–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è. –ù–æ –≤—Å–µ –æ–Ω–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –¥–æ–≤–æ–ª—å–Ω–æ –±—ã—Å—Ç—Ä–æ (—Ç–∞–∫ –∫–∞–∫ –±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å –ø—Ä–æ–±–ª–µ–º –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –Ω–∞ —ç—Ç–∞–ø–µ –ø–ª–æ—Ö–æ–≥–æ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è docker-–æ–±—Ä–∞–∑–∞). –ò, –∫–∞–∫ –≤—ã —É—Å–ø–µ–ª–∏ –ø–æ–Ω—è—Ç—å, —è —É–∂–µ —É–±—Ä–∞–ª —É –≤–∞—Å –ø–æ—á—Ç–∏ –≤–µ—Å—å –≥–æ–ª–æ–≤–Ω—è–∫, —á—Ç–æ–±—ã –≤—ã —Å–æ —Å–ø–æ–∫–æ–π–Ω–æ–π –¥—É—à–æ–π —Å–º–æ–≥–ª–∏ –≤—ã–±—Ä–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –ù–µ –±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç–µ.</p>
<p>–í —Å–ª–µ–¥—É—é—â–∏—Ö –∂–µ –≥–ª–∞–≤–∞—Ö –Ω–∞—á–Ω—É—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ –Ω–∞–ø–∞–¥–∫–∏ –≤ —Å—Ç–æ—Ä–æ–Ω—É –≤–∞—à–µ–π –ø—Å–∏—Ö–∏–∫–∏ (–¥–ª—è —Ç–µ—Ö, –∫—Ç–æ, –∫–∞–∫ —è, –Ω–µ –±—ã–ª –≥–æ—Ç–æ–≤ –∫ —Ç–∞–∫–æ–º—É –æ–ø—ã—Ç—É, –∫–æ–Ω–µ—á–Ω–æ). –ò "—Ö–∏—Ç-–ø–∞—Ä–∞–¥" –∑–≤—ë–∑–¥ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç...</p>
<h2><b>"–í–∑—Ä–æ—Å–ª–æ–µ" –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ: –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, boto3 –∏ —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö</b></h2>
<p>–í–æ–∑–º–æ–∂–Ω–æ, –¥–ª—è –≤–∞—Å –≤—Å–µ —Å–ª–æ–≤–∞, –æ –∫–æ—Ç–æ—Ä—ã—Ö —è –Ω–∞–ø–∏—Å–∞–ª –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ, —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–≤—Ç—Ä–∞–∫. –ù–æ, –µ—Å–ª–∏ –±—Ä–∞—Ç—å –æ–±—ã—á–Ω–æ–≥–æ —Ä—è–¥–æ–≤–æ–≥–æ "—É—á–µ–Ω–∏–∫–∞", —Ç–æ –æ–Ω –∏–∑—Ä–µ–¥–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø–æ–¥—Ö–æ–¥ –∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é —Å —ç—Ç–æ–π —Å—Ç–æ—Ä–æ–Ω—ã. –ü–æ—ç—Ç–æ–º—É, –∫–∞–∫ –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è, –¥–∞–Ω–Ω–∞—è —á–∞—Å—Ç—å –≤—ã–∑–æ–≤–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —É –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞. –ú—ã, –Ω–∞–∫–æ–Ω–µ—Ü, –ø—Ä–∏–æ—Ç–∫—Ä–æ–µ–º –∑–∞–Ω–∞–≤–µ—Å—É –≥–ª–∞–≤–Ω–æ–≥–æ –±–æ—Å—Å–∞ - <i>database.py</i>, –≤ –∫–æ—Ç–æ—Ä–æ–π, –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç, —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤—Å—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±–ª–∞—á–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º.</p>
<p>–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã –∏ –µ—ë —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —è –æ–∑–∞–¥–∞—á–∏–ª—Å—è —Ç–µ–º, –∫–∞–∫ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –í—ã–±–æ—Ä –ø–∞–ª –Ω–∞ s3-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ –æ—Ç –Ø–Ω–¥–µ–∫—Å–∞ –∏–∑-–∑–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –∫–æ–ª-–≤–∞ –ø–∞–º—è—Ç–∏, –ø—Ä–æ—Å—Ç–æ—Ç—ã –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–¥–æ–±–Ω–æ–≥–æ —Å–∞–π—Ç–∞, –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –µ—â—ë –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–µ—à–µ–Ω–∏–π –Ω–∞ —Ä—ã–Ω–∫–µ.</p>
<p>–û–±—ä—è—Å–Ω—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, –±–∞–∫–µ—Ç–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–ª—é—á–µ–π –Ω–µ—Ç —Å–º—ã—Å–ª–∞, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª–µ–Ω —É –∫–∞–∂–¥–æ–π –∫–æ–º–ø–∞–Ω–∏–∏. –ß–∏—Ç–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (–¥–ª—è –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö yandexcloud - –°–ø–∏—Å–æ–∫ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã).</p>
<p><i>–í–∞–∂–Ω–æ —É–ø–æ–º—è–Ω—É—Ç—å, —á—Ç–æ, –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç, database.py –µ—â—ë –Ω–µ –¥–æ–ø–∏—Å–∞–Ω.</i></p>

```python
s3_client = boto3.client( # —Å–æ–∑–¥–∞–µ–º s3-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –≤ –º–æ—ë–º —Å–ª—É—á–∞–µ, yandexcloud
    service_name='s3',
    endpoint_url='https://storage.yandexcloud.net', # —É–∫–∞–∑—ã–≤–∞–µ—Ç url –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ (—á–∞—â–µ –≤—Å–µ–≥–æ —É–∫–∞–∑–∞–Ω –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤–∞—à–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã)
    aws_access_key_id=config.S3_ACCESS_KEY, # —Ö–æ—á—É –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ç–æ, —á—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏—è –¥–≤—É—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω–∏–∂–µ –Ω–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å; –∑–¥–µ—Å—å –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–ª—é—á–∞
    aws_secret_access_key=config.S3_SECRET_KEY, # –∑–¥–µ—Å—å –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á
)

BUCKET_NAME = config.BUCKET_NAME # –Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–∫–µ—Ç–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è

AsyncSessionLocal = sessionmaker( # —Å–æ–∑–¥–∞–µ–º "—Ñ–∞–±—Ä–∏–∫—É" —Å–µ—Å—Å–∏–π, —Ç.–µ. –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—ã–∑–æ–≤–∞ 
    engine, class_=AsyncSession, expire_on_commit=False
)

async def get_session(): # —Å–æ–∑–¥–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Å—Å–∏–π
    async with AsyncSessionLocal() as session:
        yield session
```
<p>–•–æ—Ç–µ–ª–æ—Å—å –±—ã –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –ø—Ä–æ—è—Å–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–º–µ–Ω—Ç–æ–≤, —Ç–∞–∫ –∫–∞–∫ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –º—ã –Ω–µ –±—É–¥–µ–º –æ—Å–æ–±–æ –Ω–∏—á–µ–≥–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å. <i>–ö—Ç–æ —Ç–∞–∫–æ–π —ç—Ç–æ—Ç –≤–∞—à –±–∞–∫–µ—Ç?</i> –ï—Å–ª–∏ –∫—Ä–∞—Ç–∫–æ, –±–∞–∫–µ—Ç - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ. <i>–ß—Ç–æ —Ç–∞–∫–æ–µ —Å–µ—Å—Å–∏—è?</i> –û–±—ä–µ–∫—Ç, –ø–æ–º–æ–≥–∞—é—â–∏–π –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.</p>
<p>–°–µ–π—á–∞—Å –∂–µ –º—ã –ø–ª–∞–≤–Ω–æ –ø—Ä–∏—Å—Ç—É–ø–∞–µ–º –∫ —Ä–∞–±–æ—Ç–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±–ª–∞—á–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º.</p>

 ```python
async def save_user_data(user_data): # —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (–≤—ã –º–æ–≥–ª–∏ –≤–∏–¥–µ—Ç—å –µ—ë –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º state –≤ create.py)
    async for session in get_session(): # –ø–æ–ª—É—á–∞–µ–º —Å–µ—Å—Å–∏—é
        query = select(tablename).filter(User.user_id == user_data['user_id']) # —Å–æ–∑–¥–∞–µ–º sql-–∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –ø–æ user_id (—Å–¥–µ–ª–∞–Ω–æ —Å —Ü–µ–ª—å—é –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—à–∏–±–æ–∫)
        result = await session.execute(query)
        existing_user = result.scalars().first() # –≤—ã–≤–æ–¥–∏–º –ø–µ—Ä–≤—ã–π –ø–æ–ø–∞–≤—à–∏–π—Å—è –æ–±—ä–µ–∫—Ç, —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—â–∏–π –Ω–∞—à–µ–º—É —Ñ–∏–ª—å—Ç—Ä—É –ø–æ user_id (–ø–æ –∏–¥–µ–µ, –¥–æ–ª–∂–µ–Ω –≤—ã–¥–∞—Ç—å –Ω–µ None)
        if existing_user: # –ø—Ä–æ–≤–µ—Ä–∫–∞
            return "User already exists"
        new_user = User( # –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ç–∞–±–ª–∏—Ü—É; –Ω–∏–∂–µ –±–µ—Ä–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Å–æ—Ö—Ä–∞–Ω—è–ª–∏ –≤ user_data –≤ create.py
            user_id=user_data['user_id'],
            name=user_data['name'],
            age=user_data['age'],
            gender=user_data['gender'],
            gender_wf=user_data['gender_wf'],
            introduction=user_data['introduction'],
            language=user_data['language']
        )
        session.add(new_user) # –¥–æ–±–∞–≤–ª—è–µ–º
        await session.commit() # –∫–æ–º–º–∏—Ç–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è (–ø—Ä–æ—â–µ, —Å–æ—Ö—Ä–∞–Ω—è–µ–º)

async def get_user_data(user_id: int): # –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ, –º–æ–∂–Ω–æ –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–∞ –Ω–∞ –ø–µ—Ä–≤—É—é —á–∞—Å—Ç—å save_user_data, –ø–æ—ç—Ç–æ–º—É, –≤ —Ü–µ–ª–æ–º –æ–±—ä—è—Å–Ω—è—Ç—å –Ω–µ—á–µ–≥–æ
    async for session in get_session():
        query = select(User).filter(User.user_id == user_id)
        result = await session.execute(query)
        user = result.scalars().first()
        return user

async def show_user_data(user_data): # —Ñ—É–Ω–∫—Ü–∏—è, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –µ–≥–æ –∞–Ω–∫–µ—Ç—É
    user = await get_user_data(user_data['user_id']) # –æ–∂–∏–¥–∞–µ–º, –∫–æ–≥–¥–∞ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∞–Ω–µ—Ç—Å—è –∞–Ω–∫–µ—Ç–∞
    lang_texts = texts.get(user.language, texts['English']) # –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ —Ä–∞–∑–Ω—ã–µ —è–∑—ã–∫–∏
    profile = lang_texts["your_profile"].format( # –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω –≤ dictionary.py
        user.name,
        user.age,
        user.gender,
        user.gender_wf,
        user.introduction
    )
    return profile

async def delete_user_data(user_id: int): # —Ñ—É–Ω–∫—Ü–∏—è, —É–¥–∞–ª—è—é—â–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    async for session in get_session():
        query = select(User).filter(User.user_id == user_id)
        result = await session.execute(query)
        user = result.scalars().first()
        await session.delete(user) # –Ω–∞—á–∞–ª–æ –≤—Å—ë —Ç–∞–∫ –∂–µ –ø–æ—Ö–æ–∂–µ –Ω–∞ –ø–µ—Ä–≤—É—é –∏ 2—é —Ñ—É–Ω–∫—Ü–∏–∏ (—Ç–∞–∫ –∫–∞–∫ –º—ã, –ø–æ —Å—É—Ç–∏, –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã —Å –∞–Ω–∫–µ—Ç–æ–π, –¥–æ–ª–∂–Ω—ã "–≤—ã—Ç–∞—â–∏—Ç—å" –µ—ë –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö), –Ω–æ –∑–¥–µ—Å—å –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–µ—Ç–æ–¥ delete –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è (—á—Ç–æ –Ω–∏ —Å—Ç—Ä–∞–Ω–Ω–æ)
        await session.commit()

async def update_user_data(user_id: int, name: str = None, age: int = None, gender: str = None, gender_wf: str = None, introduction: str = None, language: str = None): # —Ñ—É–Ω–∫—Ü–∏—è, –∏–∑–º–µ–Ω—è—é—â–∞—è –∫–∞–∫–æ–π-–ª–∏–±–æ –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ –∞–Ω–∫–µ—Ç–µ –ø–æ —É–∫–∞–∑–∞–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    async for session in get_session():
        query = select(User).filter(User.user_id == user_id)
        result = await session.execute(query)
        user = result.scalars().first()
        if name: # –≤—Ä–æ–¥–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É if/else –æ–±—ä—è—Å–Ω—è—Ç—å –Ω–µ –Ω—É–∂–Ω–æ, –Ω–æ –≤–∞–∂–Ω–æ –ø—Ä–æ—è—Å–Ω–∏—Ç—å, —á—Ç–æ –Ω–∞ –º–æ–º–µ–Ω—Ç –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏, –º—ã —É–∂–µ –ø—Ä–∏–Ω–∏–º–∞–µ–º –Ω–∞ –≤—Ö–æ–¥ –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏, –ø–æ —Å—É—Ç–∏, –ø—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –µ–≥–æ
            user.name = name
        if age is not None:
            user.age = age
        if gender:
            user.gender = gender
        if gender_wf:
            user.gender_wf = gender_wf
        if introduction:
            user.introduction = introduction
        if language:
            user.language = language
        await session.commit()

async def upload_media(bot, file_path: str, file_name: str, user_id: str, media_type: str): # —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ –∏–∑ —Ç–µ–ª–µ–≥—Ä–∞–º–º–∞ –≤ –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
    file = await bot.download_file(file_path) # —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–ø–æ—Å–æ–± –≤—ã–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –∏–∑ —Ç–µ–ª–µ–≥—Ä–∞–º–º–∞
    match media_type:
        case "photo":
            file_name = f"{file_name}.jpg" # –º–µ—Ç–æ–¥—ã –Ω—É–º–µ—Ä–∞—Ü–∏–∏ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —è —É–∂–µ –æ–±—ä—è—Å–Ω—è–ª –≤ —á–∞—Å—Ç–∏ create.py
            content_type = "image/jpeg"
        case "video":
            file_name = f"{file_name}.mp4"
            content_type = "video/mp4"
        case _:
            return None
    file_path = f"users/{user_id}/{file_name}" # –º–Ω–µ –ø–æ–∫–∞–∑–∞–ª–æ—Å—å, —Å–∞–º–æ–π –≤—ã–∏–≥—Ä—ã—à–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ–π users/id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/1.jpg, 2.mp4, ..., 10.jpg. –ü–æ –¥–∞–Ω–Ω–æ–º—É –ø—É—Ç–∏ –ª–µ–≥–∫–æ –∏–∑–≤–ª–µ–∫–∞—Ç—å –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–µ –Ω—É–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å –Ω–∏–∫–∞–∫–∏—Ö –Ω–æ–≤—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
    s3_client.put_object( # –º–µ—Ç–æ–¥ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –≤ –æ–±–ª–∞–∫–æ –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø—É—Ç–∏
        Bucket=BUCKET_NAME,
        Key=file_path,
        Body=file,
        ContentType=content_type
    )
    file_url = f"https://{BUCKET_NAME}.s3.yandexcloud.net/{file_path}" # —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç url –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ (–Ω–µ –ø—É—Ç–∞—Ç—å url –∏ –ø—É—Ç—å —Ñ–∞–π–ª–∞)
    return file_url

async def get_next_user(db_session: AsyncSession, user_id: int): # —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ "–ü–æ–∏—Å–∫–µ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤"
    result = await db_session.execute(select(User).where(User.user_id == user_id))
    user = result.scalar_one_or_none()
    if not user:
        return None
    result = await db_session.execute(
        select(User) # —Å–æ—Å—Ç–∞–≤–ª—è–µ–º sql-–∑–∞–ø—Ä–æ—Å –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –ø–æ–¥—Ö–æ–¥—è—â–µ–π –∞–Ω–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä–∞—è
        .options(selectinload(User.views)) # –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç –Ω–∞—à–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ –∞–Ω–∫–µ—Ç—ã
        .where(
            and_(
                User.user_id != user_id,
                ~User.user_id.in_(select(UserView.viewed_user_id).where(UserView.user_id == user_id)) # –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ–±—ã –Ω–∞–º –Ω–µ –ø–æ–ø–∞–¥–∞–ª–∞—Å—å –∞–Ω–∫–µ—Ç–∞, –∫–æ—Ç–æ—Ä—É—é –º—ã —É–∂–µ –≤–∏–¥–µ–ª–∏
            )
        )
        .order_by(func.random()) # –∏ —Å–æ–∑–¥–∞–µ–º —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏—é
    )
    next_user = result.scalars().first()
    return next_user

async def add_viewed_user(db_session: AsyncSession, user_id: int, viewed_user_id: int): # —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω–æ–π –∞–Ω–∫–µ—Ç—ã –≤ —Ç–∞–±–ª–∏—Ü—É user_views
    existing_view = await db_session.execute(
        select(UserView).filter_by(user_id=user_id, viewed_user_id=viewed_user_id) # —Å–æ–∑–¥–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ —Ç–æ, —á—Ç–æ —á—É–∂–∞—è –∞–Ω–∫–µ—Ç–∞ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ user_views
    )
    existing_view = existing_view.scalar_one_or_none()
    if not existing_view:
        viewed_user = UserView(user_id=user_id, viewed_user_id=viewed_user_id)
        db_session.add(viewed_user) # –¥–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∫–µ—Ç—É –≤ —Ç–∞–±–ª–∏—Ü—É
        await db_session.commit()

async def add_liked_user(db_session: AsyncSession, user_id: int, liked_user_id: int): # —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∞–Ω–∫–µ—Ç—ã –≤ user_likes, —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π
    existing_like = await db_session.execute(
        select(UserLike).filter_by(user_id=user_id, liked_user_id=liked_user_id)
    )
    existing_like = existing_like.scalar_one_or_none()
    if not existing_like:
        like = UserLike(user_id=user_id, liked_user_id=liked_user_id)
        db_session.add(like)
        was_liked = UserWasLiked(user_id=liked_user_id, liked_user_id=user_id) # –∑–¥–µ—Å—å —Å—Ä–∞–∑—É –∂–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞—à "–ª–∞–π–∫–Ω—É–≤—à–∏–π" –≤ —Ç–∞–±–ª–∏—Ü—É was_liked –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        db_session.add(was_liked)
        await db_session.commit()
        liked_user = await db_session.execute(select(User).where(User.user_id == liked_user_id))
        liked_user = liked_user.scalar_one_or_none()
        return liked_user

async def has_likes(db_session: AsyncSession, user_id: int) -> bool: # —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –≤ –º–µ–Ω—é, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –µ—Å—Ç—å –ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ –ª–∞–π–∫–∏
    result = await db_session.execute(select(UserWasLiked).filter(UserWasLiked.user_id == user_id))
    rows = result.scalars().all()
    return len(rows) > 0

async def get_was_liked_users(db_session: AsyncSession, user_id: int): # —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–±–æ—Ä–∞ –∞–Ω–∫–µ—Ç, –∫–æ—Ç–æ—Ä—ã–µ –ª–∞–π–∫–Ω—É–ª–∏ –Ω–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    result = await db_session.execute(
        select(User)
        .join(UserWasLiked, UserWasLiked.liked_user_id == User.user_id)
        .filter(UserWasLiked.user_id == user_id)
        .order_by(UserWasLiked.id) # —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è —Å –≤–µ—Ä—Ö–∞ —Å–ø–∏—Å–∫–∞, —Ç–æ–µ—Å—Ç—å –∫—Ç–æ —Ä–∞–Ω—å—à–µ –ª–∞–π–∫–Ω—É–ª - —Ç–æ—Ç —Ä–∞–Ω—å—à–µ –ø–æ—è–≤–∏—Ç—Å—è
    )
    liked_users = result.scalars().all()
    return liked_users

async def remove_from_was_liked(db_session: AsyncSession, user_id: int, liked_user_id: int): # —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ was_liked –ø–æ—Å–ª–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –µ–≥–æ –∞–Ω–∫–µ—Ç—ã
    result = await db_session.execute(
        select(UserWasLiked).filter_by(user_id=user_id, liked_user_id=liked_user_id)
    )
    user_liked = result.scalar_one_or_none()
    if user_liked:
        await db_session.delete(user_liked)
        await db_session.commit()

async def make_match(db_session: AsyncSession, user_id: int, liked_user_id: int): # —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è "–º—ç—Ç—á–∞", –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –≤–∑–∞–∏–º–Ω–æ –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ª–∞–π–∫–Ω—É–ª–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞
    user_like_exists = await db_session.execute(
        select(UserLike).filter_by(user_id=user_id, liked_user_id=liked_user_id)
    )
    user_like = user_like_exists.scalar_one_or_none()
    liked_user_like_exists = await db_session.execute(
        select(UserLike).filter_by(user_id=liked_user_id, liked_user_id=user_id)
    )
    liked_user_like = liked_user_like_exists.scalar_one_or_none()
    if user_like and liked_user_like:
        match = UserMatch(user_1_id=user_id, user_2_id=liked_user_id)
        db_session.add(match)
        await db_session.commit()
        return True 
    return False
```
<p>–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç, —ç—Ç–æ –≤–µ—Å—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–æ—Ç–∞. –ö–∞–∫ –≤—ã —É–∂–µ –º–æ–≥–ª–∏ –∑–∞–º–µ—Ç–∏—Ç—å, –ø–æ–∫–∞ —Å –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º–∏ –±–æ—Ç –º–æ–∂–µ—Ç –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏. –û—Å—Ç–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ–∫–∞–∑–∞–ª–∏—Å—å –≥–æ—Ä–∞–∑–¥–Ω–æ —Ç—Ä—É–¥–Ω–µ–µ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –ø–æ—ç—Ç–æ–º—É –≤—Ä–µ–º–µ–Ω–Ω–æ –∏—Ö –Ω–µ—Ç.</p>
<p>–í—ã, –≤–æ–∑–º–æ–∂–Ω–æ, –∑–∞–¥–∞–¥–∏—Ç–µ—Å—å –≤–æ–ø—Ä–æ—Å–æ–º: "–ê —á—Ç–æ —Ç—É—Ç, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –≥–æ–≤–æ—Ä—è, —Å–ª–æ–∂–Ω–æ–≥–æ?" –î–ª—è —á–µ–ª–æ–≤–µ–∫–∞, –Ω–µ –∏–º–µ—é—â–µ–≥–æ –æ–ø—ã—Ç–∞ –≤ –¥–∞–Ω–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ –Ω–µ –∏–º–µ—é—â–µ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–æ–ª—å—à–∏—Ö –∑–Ω–∞–Ω–∏–π, —ç—Ç–æ –æ–∫–∞–∑–∞–ª–æ—Å—å –¥–æ–≤–æ–ª—å–Ω–æ —Å–ª–æ–∂–Ω—ã–º, —Ç–∞–∫ –∫–∞–∫ —Å –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –≤—Å—ë –±–æ–ª—å—à–µ –∏—Å–∫–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ, —á—Ç–æ –±–æ–ª—å—à–µ –ø–æ—Ö–æ–¥–∏—Ç –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å –≥—É–≥–ª–∏–Ω–≥–∞, –∞ –Ω–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è.</p>

**–ë–ª–∏–∂–∞–π—à–∏–µ –ø–ª–∞–Ω—ã**
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π —Å –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ "–∫–∞—Ä—É—Å–µ–ª–∏" –∞–Ω–∫–µ—Ç
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
<p><b>–ü—Ä–∏–º–µ—Ä–Ω–∞—è –¥–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Å–≤–µ—Ç: —Å–µ–Ω—Ç—è–±—Ä—å 2025–≥.</b></p>
<h3>–°–ø–∏—Å–æ–∫ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã</h3>

**aiogram**
- https://mastergroosha.github.io/aiogram-3-guide/ - –æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è
- https://docs.aiogram.dev/en/stable/ - –∫–æ–Ω–µ—á–Ω–æ –∂–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–¥–ª—è –±–æ–ª–µ–µ "—Ç–æ–Ω–∫–∏—Ö –º–æ–º–µ–Ω—Ç–æ–≤")
  
**docker**  
- https://youtu.be/_uZQtRyF6Eg?si=Z_Tip0bLu3loQdD6 - –≤ —Ü–µ–ª–æ–º, –±–∞–∑–æ–≤–æ–≥–æ –≤–≤–µ–¥–µ–Ω–∏—è –≤ docker –º–Ω–µ –±—ã–ª–æ –±–æ–ª–µ–µ, —á–µ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ
  
**alembic**
- https://alembic.sqlalchemy.org/en/latest/tutorial.html - –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Å alembic –ø–æ—á—Ç–∏ –≤—Å–µ —Ä–µ—à–∞–µ—Ç—Å—è –ª–∏—à—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π (–≤–æ–∑–º–æ–∂–Ω–æ –æ–¥–Ω–∏–º - –¥–≤—É–º—è –º–∏–Ω–∏-–≥–∞–π–¥–∞–º–∏ –Ω–∞ youtube)
- https://habr.com/ru/companies/amvera/articles/849836/ - –Ω–∞—á–∞—Ç—å –º–æ–∂–Ω–æ —Å –≥–ª–∞–≤—ã "–°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"

**SQLalchemy**
- https://habr.com/ru/articles/848592/ - –ø–æ–ª–æ–≤–∏–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω–∞ –∑–¥–µ—Å—å
- https://www.youtube.com/watch?v=hYuGRgVXGwU&list=PLeLN0qH0-mCXARD_K-USF2wHctxzEVp40 - —Ö–æ—Ä–æ—à–∏–π –º–∏–Ω–∏-–∫—É—Ä—Å –¥–ª—è –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è

**PgAdmin**
- https://edu.postgrespro.ru/16/dev1-16/pgadmin.pdf - –±—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ PgAdmin

**S3 storage**
- https://yandex.cloud/ru/docs/storage/quickstart - —Ç–∞–∫ –∫–∞–∫ —è –∏—Å–ø–æ–ª—å–∑—É—é –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ yandexcloud, —Ç–æ –∏ –≥–∞–π–¥ –¥–∞—é –Ω–∞ –Ω–µ–≥–æ
